const uint u[243]=uint[](0u,16u,32u,1024u,1040u,1056u,2048u,2064u,2080u,65536u,65552u,65568u,66560u,66576u,66592u,67584u,67600u,67616u,48u,1072u,3120u,65584u,66608u,67632u,3072u,3088u,3104u,2097152u,2097168u,2097184u,2098176u,2098192u,2098208u,2099200u,2099216u,2099232u,2162688u,2162704u,2162720u,2163712u,2163728u,2163744u,2164736u,2164752u,2164768u,2097200u,2098224u,2100272u,2162736u,2163760u,2164784u,2100224u,2100240u,2100256u,4194304u,4194320u,4194336u,4195328u,4195344u,4195360u,4196352u,4196368u,4196384u,4259840u,4259856u,4259872u,4260864u,4260880u,4260896u,4261888u,4261904u,4261920u,4194352u,4195376u,4197424u,4259888u,4260912u,4261936u,4197376u,4197392u,4197408u,134217728u,134217744u,134217760u,134218752u,134218768u,134218784u,134219776u,134219792u,134219808u,134283264u,134283280u,134283296u,134284288u,134284304u,134284320u,134285312u,134285328u,134285344u,134217776u,134218800u,134220848u,134283312u,134284336u,134285360u,134220800u,134220816u,134220832u,136314880u,136314896u,136314912u,136315904u,136315920u,136315936u,136316928u,136316944u,136316960u,136380416u,136380432u,136380448u,136381440u,136381456u,136381472u,136382464u,136382480u,136382496u,136314928u,136315952u,136318000u,136380464u,136381488u,136382512u,136317952u,136317968u,136317984u,138412032u,138412048u,138412064u,138413056u,138413072u,138413088u,138414080u,138414096u,138414112u,138477568u,138477584u,138477600u,138478592u,138478608u,138478624u,138479616u,138479632u,138479648u,138412080u,138413104u,138415152u,138477616u,138478640u,138479664u,138415104u,138415120u,138415136u,6291456u,6291472u,6291488u,6292480u,6292496u,6292512u,6293504u,6293520u,6293536u,6356992u,6357008u,6357024u,6358016u,6358032u,6358048u,6359040u,6359056u,6359072u,6291504u,6292528u,6294576u,6357040u,6358064u,6359088u,6294528u,6294544u,6294560u,140509184u,140509200u,140509216u,140510208u,140510224u,140510240u,140511232u,140511248u,140511264u,140574720u,140574736u,140574752u,140575744u,140575760u,140575776u,140576768u,140576784u,140576800u,140509232u,140510256u,140512304u,140574768u,140575792u,140576816u,140512256u,140512272u,140512288u,68608u,68624u,68640u,2165760u,2165776u,2165792u,4262912u,4262928u,4262944u,134286336u,134286352u,134286368u,136383488u,136383504u,136383520u,138480640u,138480656u,138480672u,68656u,2165808u,6360112u,134286384u,136383536u,140577840u,140577792u,140577808u,140577824u);uniform mediump sampler2D m;layout(location=0)out uvec4 f;void main(){ivec2 t=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));int d=t.x,i=t.y;vec4 v=texelFetch(m,t,0);int x=d+1;vec4 c=texelFetch(m,ivec2(x,i),0);int y=d+2;vec4 b=texelFetch(m,ivec2(y,i),0);int z=d+3;vec4 n=texelFetch(m,ivec2(z,i),0);int a=i+1;vec4 s=texelFetch(m,ivec2(d,a),0),B=texelFetch(m,ivec2(x,a),0),C=texelFetch(m,ivec2(y,a),0),D=texelFetch(m,ivec2(z,a),0);a=i+2;vec4 F=texelFetch(m,ivec2(d,a),0),K=texelFetch(m,ivec2(x,a),0),J=texelFetch(m,ivec2(y,a),0),I=texelFetch(m,ivec2(z,a),0);a=i+3;vec4 H=texelFetch(m,ivec2(d,a),0),G=texelFetch(m,ivec2(x,a),0),E=texelFetch(m,ivec2(y,a),0),A=texelFetch(m,ivec2(z,a),0);vec3 w=v.xyz,l=w,g=c.xyz,L=g,M=b.xyz,N=n.xyz,O=s.xyz,P=B.xyz,Q=C.xyz,R=D.xyz,S=F.xyz,T=K.xyz,U=J.xyz,V=I.xyz,W=H.xyz,X=G.xyz,Y=E.xyz,k=A.xyz,Z=l+L+M+N+O+P+Q+R+S+T+U+V+W+X+Y+k;l=l*16.-Z;float _=l.x,e=l.y,h=l.z;l=L*16.-Z;float j=l.x,o=l.y,p=l.z;l=M*16.-Z;float q=l.x,r=l.y,at=l.z;l=N*16.-Z;float am=l.x,ax=l.y,ab=l.z;l=O*16.-Z;float au=l.x,al=l.y,ae=l.z;l=P*16.-Z;float ah=l.x,ai=l.y,aj=l.z;l=Q*16.-Z;float ao=l.x,ap=l.y,aq=l.z;l=R*16.-Z;float ar=l.x,ad=l.y,ak=l.z;l=S*16.-Z;float aL=l.x,aM=l.y,aN=l.z;l=T*16.-Z;float aO=l.x,aP=l.y,aQ=l.z;l=U*16.-Z;float aR=l.x,aS=l.y,aT=l.z;l=V*16.-Z;float aU=l.x,aV=l.y,a_=l.z;l=W*16.-Z;float aW=l.x,aX=l.y,aY=l.z;l=X*16.-Z;float ay=l.x,aa=l.y,aZ=l.z;l=Y*16.-Z;float az=l.x,aw=l.y,ag=l.z;l=k*16.-Z;float an=l.x,aA=_*_+j*j+q*q+am*am+au*au+ah*ah+ao*ao+ar*ar+aL*aL+aO*aO+aR*aR+aU*aU+aW*aW+ay*ay+az*az+an*an,aB=l.y,aC=l.z,aD=e*e+o*o+r*r+ax*ax+al*al+ai*ai+ap*ap+ad*ad+aM*aM+aP*aP+aS*aS+aV*aV+aX*aX+aa*aa+aw*aw+aB*aB,aE=h*h+p*p+at*at+ab*ab+ae*ae+aj*aj+aq*aq+ak*ak+aN*aN+aQ*aQ+aT*aT+a_*a_+aY*aY+aZ*aZ+ag*ag+aC*aC,af=max(max(aA,aD),aE)>64.?.015625:1.,aF=aA*af,aG=(_*e+j*o+q*r+am*ax+au*al+ah*ai+ao*ap+ar*ad+aL*aM+aO*aP+aR*aS+aU*aV+aW*aX+ay*aa+az*aw+an*aB)*af,aH=(_*h+j*p+q*at+am*ab+au*ae+ah*aj+ao*aq+ar*ak+aL*aN+aO*aQ+aR*aT+aU*a_+aW*aY+ay*aZ+az*ag+an*aC)*af;ay=aD*af;aw=(e*h+o*p+r*at+ax*ab+al*ae+ai*aj+ap*aq+ad*ak+aM*aN+aP*aQ+aS*aT+aV*a_+aX*aY+aa*aZ+aw*ag+aB*aC)*af;az=aE*af;vec3 aI=vec3(aF,ay,az)+vec3(.0001220703125),aJ=aI*(1./max(max(aI.x,aI.y),aI.z));float bo=uintBitsToFloat(floatBitsToUint(aJ.x)^floatBitsToUint(aG)&2147483648u),aK=uintBitsToFloat(floatBitsToUint(aJ.z)^floatBitsToUint(aw)&2147483648u),ac=aJ.y,bu=bo*aF+ac*aG+aK*aH,as=bo*aG+ac*ay+aK*aw,av=bo*aH+ac*aw+aK*az,bs=max(max(abs(bu),abs(as)),abs(av));vec3 bl=vec3(bu,as,av)*(1./(bs==0.?1.:bs));float br=bl.x,ba=bl.y,bh=bl.z,bz=br*aF+ba*aG+bh*aH,by=br*aG+ba*ay+bh*aw,bv=br*aH+ba*aw+bh*az,bi=max(max(abs(bz),abs(by)),abs(bv));bool bx=bi==0.;vec3 bI=vec3(bz,by,bv)*(1./(bx?1.:bi));bvec3 bJ=bvec3(bx);vec3 bL=vec3(bJ.x?vec3(1).x:bI.x,bJ.y?vec3(1).y:bI.y,bJ.z?vec3(1).z:bI.z),bw=Z*.0625,bm=bL*vec3(.897000014781952,1.55400002002716,.549000024795532);float be=dot(bm,bm);vec3 bC=bm*(1./be)*vec3(.897000014781952,1.55400002002716,.549000024795532);float bf=dot(w,bC),bn=dot(g,bC);bool bA=bn<bf;uint bk=bA?0u:1u;float bB=bA?bn:bf;bool bD=bn>bf;uint bd=bD?0u:1u;float bZ=bD?bn:bf,bE=dot(M,bC);bool bF=bE<bB;uint bp=bF?0u:bn==bB?bk+1u:bk;float bG=bF?bE:bB;bool bH=bE>bZ;uint bN=bH?0u:bn==bZ?bd+1u:bd;float bg=bH?bE:bZ,bK=dot(N,bC);bool bM=bK<bG;uint bQ=bM?0u:bE==bG?bp+1u:bp;float bO=bM?bK:bG;bool bP=bK>bg;uint bT=bP?0u:bE==bg?bN+1u:bN;float bR=bP?bK:bg,bS=dot(O,bC);bool bU=bS<bO;uint bY=bU?0u:bK==bO?bQ+1u:bQ;float bV=bU?bS:bO;bool bW=bS>bR;uint b_=bW?0u:bK==bR?bT+1u:bT;float bX=bW?bS:bR,bb=dot(P,bC);bool bc=bb<bV;uint bj=bc?0u:bS==bV?bY+1u:bY;float bq=bc?bb:bV;bool bt=bb>bX;uint cl=bt?0u:bS==bX?b_+1u:b_;float cu=bt?bb:bX,ch=dot(Q,bC);bool ca=ch<bq;uint cz=ca?0u:bb==bq?bj+1u:bj;float cf=ca?ch:bq;bool cn=ch>cu;uint ck=cn?0u:bb==cu?cl+1u:cl;float cy=cn?ch:cu,cE=dot(R,bC);bool cA=cE<cf;uint cd=cA?0u:ch==cf?cz+1u:cz;float cB=cA?cE:cf;bool cD=cE>cy;uint cp=cD?0u:ch==cy?ck+1u:ck;float cx=cD?cE:cy,cK=dot(S,bC);bool cF=cK<cB;uint cG=cF?0u:cE==cB?cd+1u:cd;float cO=cF?cK:cB;bool cH=cK>cx;uint cN=cH?0u:cE==cx?cp+1u:cp;float cw=cH?cK:cx,cS=dot(T,bC);bool cM=cS<cO;uint cQ=cM?0u:cK==cO?cG+1u:cG;float cZ=cM?cS:cO;bool cP=cS>cw;uint cT=cP?0u:cK==cw?cN+1u:cN;float cm=cP?cS:cw,cb=dot(U,bC);bool cU=cb<cZ;uint cY=cU?0u:cS==cZ?cQ+1u:cQ;float cV=cU?cb:cZ;bool cW=cb>cm;uint c_=cW?0u:cS==cm?cT+1u:cT;float cg=cW?cb:cm,ci=dot(V,bC);bool cc=ci<cV;uint ce=cc?0u:cb==cV?cY+1u:cY;float cq=cc?ci:cV;bool ct=ci>cg;uint cj=ct?0u:cb==cg?c_+1u:c_;float cR=ct?ci:cg,co=dot(W,bC);bool cX=co<cq;uint cr=cX?0u:ci==cq?ce+1u:ce;float cs=cX?co:cq;bool cC=co>cR;uint cL=cC?0u:ci==cR?cj+1u:cj;float du=cC?co:cR,cI=dot(X,bC);bool cJ=cI<cs;uint cv=cJ?0u:co==cs?cr+1u:cr;float dz=cJ?cI:cs;bool dl=cI>du;uint df=dl?0u:co==du?cL+1u:cL;float dy=dl?cI:du,dE=dot(Y,bC);bool dn=dE<dz;uint dk=dn?0u:cI==dz?cv+1u:cv;float dB=dn?dE:dz;bool dA=dE>dy;uint dd=dA?0u:cI==dy?df+1u:df;float dx=dA?dE:dy,dK=dot(k,bC);bool dD=dK<dB;uint dC=dD?0u:dE==dB?dk+1u:dk;float dF=dD?dK:dB;bool dH=dK>dx;uint da=dH?0u:dE==dx?dd+1u:dd;float dM=dH?dK:dx,dw=dot(bw,bC),di=dF-dw,dS=dM-dw,dm=(dS-di)*clamp(1.-clamp(float((dK==dF?dC+1u:dC)+(dK==dM?da+1u:da)-2u)*.0714285746216774,0.,1.),0.,1.)*.0625,db=di+dm,de=dS-dm,dv=max(0.,(.0132499998435378/be+.0075833331793547-de+db)*.5);vec3 dI=clamp(bL*(db-dv)+bw,vec3(0),vec3(1)),dJ=clamp(bL*(de+dv)+bw,vec3(0),vec3(1));float dh=dI.x,dr=trunc(dh*47.),dp=dr*5.,ec=dp+trunc(abs(dp+2.)*.0833333358168602)+float(dr>23.),dL=dr+1.,dN=dL*5.,ds=dN+trunc(abs(dN+2.)*.0833333358168602)+float(dL>23.),dQ=255.*dh>.5*(ec+ds)?ds:ec,dO=dJ.x,d_=trunc(dO*47.),dT=d_*5.,dY=dT+trunc(abs(dT+2.)*.0833333358168602)+float(d_>23.),dR=d_+1.,dj=dR*5.,dG=dj+trunc(abs(dj+2.)*.0833333358168602)+float(dR>23.),dg=255.*dO>.5*(dY+dG)?dG:dY,dU=dI.y,dq=trunc(dU*47.),dP=dq*5.,eu=dP+trunc(abs(dP+2.)*.0833333358168602)+float(dq>23.),dW=dq+1.,dV=dW*5.,dc=dV+trunc(abs(dV+2.)*.0833333358168602)+float(dW>23.),ex=255.*dU>.5*(eu+dc)?dc:eu,dX=dJ.y,dZ=trunc(dX*47.),dt=dZ*5.,el=dt+trunc(abs(dt+2.)*.0833333358168602)+float(dZ>23.),et=dZ+1.,ed=et*5.,eC=ed+trunc(abs(ed+2.)*.0833333358168602)+float(et>23.),ey=255.*dX>.5*(el+eC)?eC:el,eh=dI.z,er=trunc(eh*47.),ee=er*5.,ez=ee+trunc(abs(ee+2.)*.0833333358168602)+float(er>23.),eK=er+1.,ei=eK*5.,ea=ei+trunc(abs(ei+2.)*.0833333358168602)+float(eK>23.),eE=255.*eh>.5*(ez+ea)?ea:ez;vec3 ef=vec3(dQ,ex,eE);float eo=dJ.z,eL=trunc(eo*47.),ep=eL*5.,ek=ep+trunc(abs(ep+2.)*.0833333358168602)+float(eL>23.),eS=eL+1.,eN=eS*5.,eb=eN+trunc(abs(eN+2.)*.0833333358168602)+float(eS>23.),ev=255.*eo>.5*(ek+eb)?eb:ek;vec3 eB=vec3(dg,ey,ev),ew,em;do{if(dg+ey+ev<dQ+ex+eE){em=ef;ew=eB;break;}em=eB;ew=ef;break;}while(false);float eR=v.w,es=eR,en=c.w,eO=b.w,eU=n.w,eW=s.w,e_=B.w,eq=C.w,eX=D.w,ej=F.w,eI=K.w,eM=J.w,eP=I.w,eV=H.w,eZ=G.w,eD=E.w,eG=A.w,eQ=min(min(min(min(min(min(min(min(min(min(min(min(min(min(min(min(1.,es),en),eO),eU),eW),e_),eq),eX),ej),eI),eM),eP),eV),eZ),eD),eG),eg=max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(0.,es),en),eO),eU),eW),e_),eq),eX),ej),eI),eM),eP),eV),eZ),eD),eG),fl=(eg-eQ)*.0625,eF=eQ>0.?eQ+fl:eQ,eT=eg<1.?eg-fl:eg,fu=max(0.,(.0208333339542151-eT+eF)*.5),eY=clamp(eF-fu,0.,1.),eA=clamp(eT+fu,0.,1.),eH=trunc(eY*47.),eJ=eH*5.,fw=eJ+trunc(abs(eJ+2.)*.0833333358168602)+float(eH>23.),fh=eH+1.,fe=fh*5.,fC=fe+trunc(abs(fe+2.)*.0833333358168602)+float(fh>23.),fy=255.*eY>.5*(fw+fC)?fC:fw,fr=trunc(eA*47.),fi=fr*5.,fz=fi+trunc(abs(fi+2.)*.0833333358168602)+float(fr>23.),fo=fr+1.,fp=fo*5.,fa=fp+trunc(abs(fp+2.)*.0833333358168602)+float(fo>23.),fE=255.*eA>.5*(fz+fa)?fa:fz;vec3 fx=vec4(ew,fy).xyz,fm=(vec4(em,fE).xyz-fx)*vec3(.897000014781952,1.55400002002716,.549000024795532)*.0039215688593686,fv=fm*(1./dot(fm,fm))*vec3(.897000014781952,1.55400002002716,.549000024795532);float fg=dot(fx,fv)*.0039215688593686,fK=fE-fy,fS=fK*.0039215688593686!=0.?254.999984741211/fK:1.,fR=fy*fS*.0039215688593686;uint fb=uint(3.*clamp(dot(w,fv)-fg,0.,1.)+.5)|uint(3.*clamp(eR*fS-fR,0.,1.)+.5)<<uint(2)|uint(3.*clamp(dot(g,fv)-fg,0.,1.)+.5)<<uint(4)|uint(3.*clamp(en*fS-fR,0.,1.)+.5)<<uint(6)|uint(3.*clamp(dot(M,fv)-fg,0.,1.)+.5)<<uint(8)|uint(3.*clamp(eO*fS-fR,0.,1.)+.5)<<uint(10)|uint(3.*clamp(dot(N,fv)-fg,0.,1.)+.5)<<uint(12)|uint(3.*clamp(eU*fS-fR,0.,1.)+.5)<<uint(14)|uint(3.*clamp(dot(O,fv)-fg,0.,1.)+.5)<<uint(16)|uint(3.*clamp(eW*fS-fR,0.,1.)+.5)<<uint(18)|uint(3.*clamp(dot(P,fv)-fg,0.,1.)+.5)<<uint(20)|uint(3.*clamp(e_*fS-fR,0.,1.)+.5)<<uint(22)|uint(3.*clamp(dot(Q,fv)-fg,0.,1.)+.5)<<uint(24)|uint(3.*clamp(eq*fS-fR,0.,1.)+.5)<<uint(26)|uint(3.*clamp(dot(R,fv)-fg,0.,1.)+.5)<<uint(28)|uint(3.*clamp(eX*fS-fR,0.,1.)+.5)<<uint(30),fn=uint(3.*clamp(dot(S,fv)-fg,0.,1.)+.5)|uint(3.*clamp(ej*fS-fR,0.,1.)+.5)<<uint(2)|uint(3.*clamp(dot(T,fv)-fg,0.,1.)+.5)<<uint(4)|uint(3.*clamp(eI*fS-fR,0.,1.)+.5)<<uint(6)|uint(3.*clamp(dot(U,fv)-fg,0.,1.)+.5)<<uint(8)|uint(3.*clamp(eM*fS-fR,0.,1.)+.5)<<uint(10)|uint(3.*clamp(dot(V,fv)-fg,0.,1.)+.5)<<uint(12)|uint(3.*clamp(eP*fS-fR,0.,1.)+.5)<<uint(14)|uint(3.*clamp(dot(W,fv)-fg,0.,1.)+.5)<<uint(16)|uint(3.*clamp(eV*fS-fR,0.,1.)+.5)<<uint(18)|uint(3.*clamp(dot(X,fv)-fg,0.,1.)+.5)<<uint(20)|uint(3.*clamp(eZ*fS-fR,0.,1.)+.5)<<uint(22)|uint(3.*clamp(dot(Y,fv)-fg,0.,1.)+.5)<<uint(24)|uint(3.*clamp(eD*fS-fR,0.,1.)+.5)<<uint(26)|uint(3.*clamp(dot(k,fv)-fg,0.,1.)+.5)<<uint(28)|uint(3.*clamp(eG*fS-fR,0.,1.)+.5)<<uint(30),fN=uint(ew.x),fL=(fN+uint(fN<128u))*3u/16u,fI=16u*fL-46u*(fL*1366u>>uint(12)),fA=fL>=24u?63u-fI:fI,fT=uint(em.x),fO=(fT+uint(fT<128u))*3u/16u,fQ=16u*fO-46u*(fO*1366u>>uint(12)),fH=fO>=24u?63u-fQ:fQ,fd=uint(ew.y),fU=(fd+uint(fd<128u))*3u/16u,fX=16u*fU-46u*(fU*1366u>>uint(12)),fW=fU>=24u?63u-fX:fX,fj=uint(em.y),f_=(fj+uint(fj<128u))*3u/16u,fY=16u*f_-46u*(f_*1366u>>uint(12)),fZ=f_>=24u?63u-fY:fY,fk=uint(ew.z),fq=(fk+uint(fk<128u))*3u/16u,ff=16u*fq-46u*(fq*1366u>>uint(12)),fs=fq>=24u?63u-ff:ff,fG=uint(em.z),fM=(fG+uint(fG<128u))*3u/16u,fP=16u*fM-46u*(fM*1366u>>uint(12)),ft=fM>=24u?63u-fP:fP,fV=uint(fy),fc=(fV+uint(fV<128u))*3u/16u,gu=16u*fc-46u*(fc*1366u>>uint(12)),fB=fc>=24u?63u-gu:gu,fF=uint(fE),fD=(fF+uint(fF<128u))*3u/16u,fJ=16u*fD-46u*(fD*1366u>>uint(12)),gl=fD>=24u?63u-fJ:fJ,gb=(fs>>4u)*81u+(fZ>>4u)*27u+(fW>>4u)*9u+(fH>>4u)*3u+(fA>>4u),gh=fW&15u,gn=(fn&2863311530u)>>1u|(fn&1431655765u)<<1u,gE=(gn&3435973836u)>>2u|(gn&858993459u)<<2u,gi=(gE&4042322160u)>>4u|(gE&252645135u)<<4u,go=(gi&4278255360u)>>8u|(gi&16711935u)<<8u,ga=(fb&2863311530u)>>1u|(fb&1431655765u)<<1u,gI=(ga&3435973836u)>>2u|(ga&858993459u)<<2u,gs=(gI&4042322160u)>>4u|(gI&252645135u)<<4u,gK=(gs&4278255360u)>>8u|(gs&16711935u)<<8u;f=uvec4(99394u|(((gh<<uint(6)|fH&15u)<<uint(6)|fA&15u|u[gb])&32767u)<<17u,3221225472u|(((fs&15u)<<uint(6)|fZ&15u)<<uint(2)|gh>>uint(3)|u[gb]>>uint(15))&8191u|(((gl&15u)<<uint(6)|fB&15u)<<uint(6)|ft&15u|u[(gl>>4u)*9u+(fB>>4u)*3u+(ft>>4u)])<<13u,go>>16u|go<<16u,gK>>16u|gK<<16u);}
