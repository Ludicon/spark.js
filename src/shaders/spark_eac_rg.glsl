uvec4 u;uniform mediump sampler2D x;layout(location=0)out uvec4 e;void main(){uint c=(uvec2(textureSize(x,0)).x+3u)/4u;ivec2 f=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));uvec4 b=u;bool i;uvec4 m;float t[16],l[16];int k;float y,g,n;for(;;){int u=f.x,e=f.y,w=u+1,z=u+2,C=u+3,D=e+1,F=e+2,J=e+3;float s[16]=float[](texelFetch(x,f,0).x,texelFetch(x,ivec2(w,e),0).x,texelFetch(x,ivec2(z,e),0).x,texelFetch(x,ivec2(C,e),0).x,texelFetch(x,ivec2(u,D),0).x,texelFetch(x,ivec2(w,D),0).x,texelFetch(x,ivec2(z,D),0).x,texelFetch(x,ivec2(C,D),0).x,texelFetch(x,ivec2(u,F),0).x,texelFetch(x,ivec2(w,F),0).x,texelFetch(x,ivec2(z,F),0).x,texelFetch(x,ivec2(C,F),0).x,texelFetch(x,ivec2(u,J),0).x,texelFetch(x,ivec2(w,J),0).x,texelFetch(x,ivec2(z,J),0).x,texelFetch(x,ivec2(C,J),0).x);t=s;l=s;n=l[0];g=l[0];y=l[0];for(k=1;k<16;){n+=l[k];g=max(g,l[k]);y=min(y,l[k]);k++;continue;}float v=y*255.,G=g*255.,E=G-v;bool B=E>8.;E=clamp(trunc(E*(B?.0412900000810623:.0543290004134178)),1.,15.);float A=510./E;v=30.-trunc(.5*(E+v+G))*(2./E);uint H=B?2857717760u:4289374800u,I=B?1073741738u:1073741823u,K=~(int(B)==0?28143u:14526u),L=clamp(uint(t[0]*A+v),0u,59u),M=uint(L>28u);L-=29u;bool N=M==0u;L=N?~L:L;L=(L>15u?I:H)>>(2u*L&31u)&3u;G=float(K>>4u*L&15u);uint O=clamp(uint(t[4]*A+v),0u,59u),P=uint(O>28u);O-=29u;bool Q=P==0u;O=Q?~O:O;O=(O>15u?I:H)>>(2u*O&31u)&3u;float R=float(K>>4u*O&15u);uint S=clamp(uint(t[8]*A+v),0u,59u),T=uint(S>28u);S-=29u;bool U=T==0u;S=U?~S:S;S=(S>15u?I:H)>>(2u*S&31u)&3u;float V=float(K>>4u*S&15u);uint W=clamp(uint(t[12]*A+v),0u,59u),X=uint(W>28u);W-=29u;bool Y=X==0u;W=Y?~W:W;W=(W>15u?I:H)>>(2u*W&31u)&3u;float Z=float(K>>4u*W&15u);uint _=clamp(uint(t[1]*A+v),0u,59u),a=uint(_>28u);_-=29u;bool d=a==0u;_=d?~_:_;_=(_>15u?I:H)>>(2u*_&31u)&3u;float h=float(K>>4u*_&15u);uint j=clamp(uint(t[5]*A+v),0u,59u),o=uint(j>28u);j-=29u;bool p=o==0u;j=p?~j:j;j=(j>15u?I:H)>>(2u*j&31u)&3u;float q=float(K>>4u*j&15u);uint r=clamp(uint(t[9]*A+v),0u,59u),at=uint(r>28u),ax=r-29u;bool am=at==0u;uint aj=am?~ax:ax,ay=(aj>15u?I:H)>>(2u*aj&31u)&3u;float au=float(K>>4u*ay&15u);uint ag=clamp(uint(t[13]*A+v),0u,59u),ak=uint(ag>28u),af=ag-29u;bool aB=ak==0u;uint aE=aB?~af:af,ab=(aE>15u?I:H)>>(2u*aE&31u)&3u;float av=float(K>>4u*ab&15u);uint aL=(L|M<<2u)<<uint(21)|(O|P<<2u)<<uint(18)|(S|T<<2u)<<uint(15)|(W|X<<2u)<<uint(12)|(_|a<<2u)<<uint(9)|(j|o<<2u)<<uint(6)|(ay|at<<2u)<<uint(3)|(ab|ak<<2u),aK=clamp(uint(t[2]*A+v),0u,59u),aM=uint(aK>28u),aI=aK-29u;bool aN=aM==0u;uint aO=aN?~aI:aI,aS=(aO>15u?I:H)>>(2u*aO&31u)&3u;float aH=float(K>>4u*aS&15u);uint aG=clamp(uint(t[6]*A+v),0u,59u),aP=uint(aG>28u),aw=aG-29u;bool aQ=aP==0u;uint aW=aQ?~aw:aw,an=(aW>15u?I:H)>>(2u*aW&31u)&3u;float aD=float(K>>4u*an&15u);uint a_=clamp(uint(t[10]*A+v),0u,59u),aT=uint(a_>28u),az=a_-29u;bool aU=aT==0u;uint aX=aU?~az:az,aa=(aX>15u?I:H)>>(2u*aX&31u)&3u;float aF=float(K>>4u*aa&15u);uint ar=clamp(uint(t[14]*A+v),0u,59u),ao=uint(ar>28u),aC=ar-29u;bool aY=ao==0u;uint ac=aY?~aC:aC,ae=(ac>15u?I:H)>>(2u*ac&31u)&3u;float aJ=float(K>>4u*ae&15u);uint ai=clamp(uint(t[3]*A+v),0u,59u),al=uint(ai>28u),aR=ai-29u;bool ad=al==0u;uint aA=ad?~aR:aR,aV=(aA>15u?I:H)>>(2u*aA&31u)&3u;float bu=float(K>>4u*aV&15u);uint aZ=clamp(uint(t[7]*A+v),0u,59u),ah=uint(aZ>28u),bx=aZ-29u;bool ap=ah==0u;uint aq=ap?~bx:bx,as=(aq>15u?I:H)>>(2u*aq&31u)&3u;float bo=float(K>>4u*as&15u);uint bj=clamp(uint(t[11]*A+v),0u,59u),bk=uint(bj>28u),by=bj-29u;bool bB=bk==0u;uint bE=bB?~by:by,bb=(bE>15u?I:H)>>(2u*bE&31u)&3u;float bv=float(K>>4u*bb&15u);uint br=clamp(uint(t[15]*A+v),0u,59u),bg=uint(br>28u),bf=br-29u;bool bd=bg==0u;uint bK=bd?~bf:bf,bL=(bK>15u?I:H)>>(2u*bK&31u)&3u;float bH=float(K>>4u*bL&15u);uint bO=(aS|aM<<2u)<<uint(21)|(an|aP<<2u)<<uint(18)|(aa|aT<<2u)<<uint(15)|(ae|ao<<2u)<<uint(12)|(aV|al<<2u)<<uint(9)|(as|ah<<2u)<<uint(6)|(bb|bk<<2u)<<uint(3)|(bL|bg<<2u);uvec4 be=b;be.x=uint(clamp(n*15.9375-((N?-1.-G:G)+(Q?-1.-R:R)+(U?-1.-V:V)+(Y?-1.-Z:Z)+(d?-1.-h:h)+(p?-1.-q:q)+(am?-1.-au:au)+(aB?-1.-av:av)+(aN?-1.-aH:aH)+(aQ?-1.-aD:aD)+(aU?-1.-aF:aF)+(aY?-1.-aJ:aJ)+(ad?-1.-bu:bu)+(ap?-1.-bo:bo)+(bB?-1.-bv:bv)+(bd?-1.-bH:bH))*E*.0625+.5,0.,255.))|(uint(E)<<uint(12)|(B?2u:13u)<<uint(8))|aL&16711680u|(aL&65280u)<<uint(16);m=be;m.y=aL&255u|(bO&16711680u)>>uint(8)|(bO&65280u)<<uint(8)|(bO&255u)<<uint(24);i=c==0u;if(i){b=m;continue;}else break;}for(;;){float u[16]=float[](texelFetchOffset(x,f,0,ivec2(0)).y,texelFetchOffset(x,f,0,ivec2(1,0)).y,texelFetchOffset(x,f,0,ivec2(2,0)).y,texelFetchOffset(x,f,0,ivec2(3,0)).y,texelFetchOffset(x,f,0,ivec2(0,1)).y,texelFetchOffset(x,f,0,ivec2(1)).y,texelFetchOffset(x,f,0,ivec2(2,1)).y,texelFetchOffset(x,f,0,ivec2(3,1)).y,texelFetchOffset(x,f,0,ivec2(0,2)).y,texelFetchOffset(x,f,0,ivec2(1,2)).y,texelFetchOffset(x,f,0,ivec2(2)).y,texelFetchOffset(x,f,0,ivec2(3,2)).y,texelFetchOffset(x,f,0,ivec2(0,3)).y,texelFetchOffset(x,f,0,ivec2(1,3)).y,texelFetchOffset(x,f,0,ivec2(2,3)).y,texelFetchOffset(x,f,0,ivec2(3)).y);t=u;l=u;n=l[0];g=l[0];y=l[0];for(k=1;k<16;){n+=l[k];g=max(g,l[k]);y=min(y,l[k]);k++;continue;}float v=y*255.,a=g*255.,c=a-v;bool d=c>8.;c=clamp(trunc(c*(d?.0412900000810623:.0543290004134178)),1.,15.);float O=510./c;v=30.-trunc(.5*(c+v+a))*(2./c);uint e=d?2857717760u:4289374800u,D=d?1073741738u:1073741823u,K=~(int(d)==0?28143u:14526u),L=clamp(uint(t[0]*O+v),0u,59u),o=uint(L>28u);L-=29u;bool N=o==0u;L=N?~L:L;L=(L>15u?D:e)>>(2u*L&31u)&3u;a=float(K>>4u*L&15u);uint S=clamp(uint(t[4]*O+v),0u,59u),M=uint(S>28u);S-=29u;bool B=M==0u;S=B?~S:S;S=(S>15u?D:e)>>(2u*S&31u)&3u;float H=float(K>>4u*S&15u);uint j=clamp(uint(t[8]*O+v),0u,59u),P=uint(j>28u);j-=29u;bool Q=P==0u;j=Q?~j:j;j=(j>15u?D:e)>>(2u*j&31u)&3u;float I=float(K>>4u*j&15u);uint W=clamp(uint(t[12]*O+v),0u,59u),T=uint(W>28u);W-=29u;bool U=T==0u;W=U?~W:W;W=(W>15u?D:e)>>(2u*W&31u)&3u;float F=float(K>>4u*W&15u);uint _=clamp(uint(t[1]*O+v),0u,59u),J=uint(_>28u);_-=29u;bool Y=J==0u;_=Y?~_:_;_=(_>15u?D:e)>>(2u*_&31u)&3u;float G=float(K>>4u*_&15u);uint A=clamp(uint(t[5]*O+v),0u,59u),X=uint(A>28u);A-=29u;bool p=X==0u;A=p?~A:A;A=(A>15u?D:e)>>(2u*A&31u)&3u;float R=float(K>>4u*A&15u);uint r=clamp(uint(t[9]*O+v),0u,59u),E=uint(r>28u),w=r-29u;bool z=E==0u;uint C=z?~w:w,V=(C>15u?D:e)>>(2u*C&31u)&3u;float h=float(K>>4u*V&15u);uint Z=clamp(uint(t[13]*O+v),0u,59u),s=uint(Z>28u),q=Z-29u;bool at=s==0u;uint am=at?~q:q,aj=(am>15u?D:e)>>(2u*am&31u)&3u;float au=float(K>>4u*aj&15u);uint ay=(L|o<<2u)<<uint(21)|(S|M<<2u)<<uint(18)|(j|P<<2u)<<uint(15)|(W|T<<2u)<<uint(12)|(_|J<<2u)<<uint(9)|(A|X<<2u)<<uint(6)|(V|E<<2u)<<uint(3)|(aj|s<<2u),ar=clamp(uint(t[2]*O+v),0u,59u),ak=uint(ar>28u),ax=ar-29u;bool aB=ak==0u;uint aA=aB?~ax:ax,ab=(aA>15u?D:e)>>(2u*aA&31u)&3u;float av=float(K>>4u*ab&15u);uint aK=clamp(uint(t[6]*O+v),0u,59u),ao=uint(aK>28u),af=aK-29u;bool ad=ao==0u;uint aL=ad?~af:af,aO=(aL>15u?D:e)>>(2u*aL&31u)&3u;float aH=float(K>>4u*aO&15u);uint aS=clamp(uint(t[10]*O+v),0u,59u),aM=uint(aS>28u),aI=aS-29u;bool aN=aM==0u;uint aW=aN?~aI:aI,aE=(aW>15u?D:e)>>(2u*aW&31u)&3u;float aD=float(K>>4u*aE&15u);uint ag=clamp(uint(t[14]*O+v),0u,59u),aP=uint(ag>28u),aw=ag-29u;bool aQ=aP==0u;uint a_=aQ?~aw:aw,aV=(a_>15u?D:e)>>(2u*a_&31u)&3u;float ae=float(K>>4u*aV&15u);uint aG=clamp(uint(t[3]*O+v),0u,59u),aT=uint(aG>28u),az=aG-29u;bool aU=aT==0u;uint ac=aU?~az:az,aa=(ac>15u?D:e)>>(2u*ac&31u)&3u;float aF=float(K>>4u*aa&15u);uint aZ=clamp(uint(t[7]*O+v),0u,59u),aX=uint(aZ>28u),aC=aZ-29u;bool aY=aX==0u;uint an=aY?~aC:aC,as=(an>15u?D:e)>>(2u*an&31u)&3u;float aJ=float(K>>4u*as&15u);uint ai=clamp(uint(t[11]*O+v),0u,59u),ah=uint(ai>28u),aR=ai-29u;bool ap=ah==0u;uint aq=ap?~aR:aR,al=(aq>15u?D:e)>>(2u*aq&31u)&3u;float bu=float(K>>4u*al&15u);uint bo=clamp(uint(t[15]*O+v),0u,59u),bk=uint(bo>28u),bx=bo-29u;bool bB=bk==0u;uint bj=bB?~bx:bx,by=(bj>15u?D:e)>>(2u*bj&31u)&3u;float bv=float(K>>4u*by&15u);uint bA=(ab|ak<<2u)<<uint(21)|(aO|ao<<2u)<<uint(18)|(aE|aM<<2u)<<uint(15)|(aV|aP<<2u)<<uint(12)|(aa|aT<<2u)<<uint(9)|(as|aX<<2u)<<uint(6)|(al|ah<<2u)<<uint(3)|(by|bk<<2u);uvec4 be=m;be.z=uint(clamp(n*15.9375-((N?-1.-a:a)+(B?-1.-H:H)+(Q?-1.-I:I)+(U?-1.-F:F)+(Y?-1.-G:G)+(p?-1.-R:R)+(z?-1.-h:h)+(at?-1.-au:au)+(aB?-1.-av:av)+(ad?-1.-aH:aH)+(aN?-1.-aD:aD)+(aQ?-1.-ae:ae)+(aU?-1.-aF:aF)+(aY?-1.-aJ:aJ)+(ap?-1.-bu:bu)+(bB?-1.-bv:bv))*c*.0625+.5,0.,255.))|(uint(c)<<uint(12)|(d?2u:13u)<<uint(8))|ay&16711680u|(ay&65280u)<<uint(16);b=be;b.w=ay&255u|(bA&16711680u)>>uint(8)|(bA&65280u)<<uint(8)|(bA&255u)<<uint(24);if(i){m=b;continue;}else break;}e=b;}
