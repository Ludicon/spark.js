uint t;float u;uniform mediump sampler2D z;layout(location=0)out uvec4 w;void main(){ivec2 v=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));int m=v.x,d=v.y;vec4 x=texelFetch(z,v,0);int y=m+1;vec4 a=texelFetch(z,ivec2(y,d),0);int f=m+2;vec4 b=texelFetch(z,ivec2(f,d),0);int g=m+3;vec4 c=texelFetch(z,ivec2(g,d),0);int i=d+1;vec4 l=texelFetch(z,ivec2(m,i),0),n=texelFetch(z,ivec2(y,i),0),B=texelFetch(z,ivec2(f,i),0),C=texelFetch(z,ivec2(g,i),0);i=d+2;vec4 s=texelFetch(z,ivec2(m,i),0),D=texelFetch(z,ivec2(y,i),0),F=texelFetch(z,ivec2(f,i),0),H=texelFetch(z,ivec2(g,i),0);i=d+3;vec4 G=texelFetch(z,ivec2(m,i),0),E=texelFetch(z,ivec2(y,i),0),A=texelFetch(z,ivec2(f,i),0),I=texelFetch(z,ivec2(g,i),0);float J=x.w,K=J,L=a.w,e=L,M=b.w,N=c.w,O=l.w,P=n.w,Q=B.w,R=C.w,S=s.w,T=D.w,U=F.w,V=H.w,W=G.w,X=E.w,Y=A.w,Z=I.w,_=min(min(min(min(min(min(min(min(min(min(min(min(min(min(min(K,e),M),N),O),P),Q),R),S),T),U),V),W),X),Y),Z),h=max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(K,e),M),N),O),P),Q),R),S),T),U),V),W),X),Y),Z);bool j=h-_<.015625,k=_==0.||h==1.?!j:false;vec3 o=a.xyz,p=o,q=x.xyz,r=q;K+=e;bool at=!k,ax=!at;vec4 aw,az;if(ax?L>0.:at){vec3 v=min(r,p);vec4 f=x;f.x=v.x;f.y=v.y;f.z=v.z;v=max(r,p);vec4 u=x;u.x=v.x;u.y=v.y;u.z=v.z;az=u;aw=f;}else az=x,aw=x;e=min(aw.w,L);aw.w=e;float au=max(az.w,L);az.w=au;p=b.xyz;float am=K+M;vec4 ay;aw=(ax?M>0.:at)?ay=vec4(max(az.xyz,p),au),vec4(min(aw.xyz,p),e):(ay=az,aw);au=min(aw.w,M);aw.w=au;e=max(ay.w,M);ay.w=e;r=c.xyz;float ab=am+N;ay=(ax?N>0.:at)?az=vec4(max(ay.xyz,r),e),vec4(min(aw.xyz,r),au):(az=ay,aw);au=min(ay.w,N);ay.w=au;e=max(az.w,N);aw=az;aw.w=e;vec3 ai=l.xyz;float ae=ab+O;ay=(ax?O>0.:at)?az=vec4(max(aw.xyz,ai),e),vec4(min(ay.xyz,ai),au):(az=aw,ay);float ap=min(ay.w,O);vec4 av=ay;av.w=ap;float ad=max(az.w,O);vec4 af=az;af.w=ad;vec3 aM=n.xyz;float aN=ae+P;vec4 al,an=(ax?P>0.:at)?al=vec4(max(af.xyz,aM),ad),vec4(min(av.xyz,aM),ap):(al=af,av);float aO=min(an.w,P);vec4 aP=an;aP.w=aO;float aQ=max(al.w,P);vec4 aA=al;aA.w=aQ;vec3 aR=B.xyz;float aS=aN+Q;vec4 aB,aC=(ax?Q>0.:at)?aB=vec4(max(aA.xyz,aR),aQ),vec4(min(aP.xyz,aR),aO):(aB=aA,aP);float aT=min(aC.w,Q);vec4 aU=aC;aU.w=aT;float aV=max(aB.w,Q);vec4 aD=aB;aD.w=aV;vec3 aW=C.xyz;float aX=aS+R;vec4 aE,aF=(ax?R>0.:at)?aE=vec4(max(aD.xyz,aW),aV),vec4(min(aU.xyz,aW),aT):(aE=aD,aU);float aY=min(aF.w,R);vec4 ar=aF;ar.w=aY;float aZ=max(aE.w,R);vec4 aG=aE;aG.w=aZ;vec3 aL=s.xyz;float aK=aX+S;vec4 aH,aI=(ax?S>0.:at)?aH=vec4(max(aG.xyz,aL),aZ),vec4(min(ar.xyz,aL),aY):(aH=aG,ar);float a_=min(aI.w,S);vec4 aa=aI;aa.w=a_;float ah=max(aH.w,S);vec4 ac=aH;ac.w=ah;vec3 ag=D.xyz;float aj=aK+T;vec4 as,aq=(ax?T>0.:at)?as=vec4(max(ac.xyz,ag),ah),vec4(min(aa.xyz,ag),a_):(as=ac,aa);float ak=min(aq.w,T);vec4 aJ=aq;aJ.w=ak;float ao=max(as.w,T);vec4 bw=as;bw.w=ao;vec3 bz=F.xyz;float bu=aj+U;vec4 by,bo=(ax?U>0.:at)?by=vec4(max(bw.xyz,bz),ao),vec4(min(aJ.xyz,bz),ak):(by=bw,aJ);float bx=min(bo.w,U);vec4 bv=bo;bv.w=bx;float bt=max(by.w,U);vec4 bs=by;bs.w=bt;vec3 bi=H.xyz;float be=bu+V;vec4 bf,bB=(ax?V>0.:at)?bf=vec4(max(bs.xyz,bi),bt),vec4(min(bv.xyz,bi),bx):(bf=bs,bv);float bM=min(bB.w,V);vec4 bp=bB;bp.w=bM;float bO=max(bf.w,V);vec4 bA=bf;bA.w=bO;vec3 bL=G.xyz;float bd=be+W;vec4 bE,bH=(ax?W>0.:at)?bE=vec4(max(bA.xyz,bL),bO),vec4(min(bp.xyz,bL),bM):(bE=bA,bp);float bQ=min(bH.w,W);vec4 bP=bH;bP.w=bQ;float bR=max(bE.w,W);vec4 bD=bE;bD.w=bR;vec3 bW=E.xyz;float bN=bd+X;vec4 bl,bn=(ax?X>0.:at)?bl=vec4(max(bD.xyz,bW),bR),vec4(min(bP.xyz,bW),bQ):(bl=bD,bP);float bT=min(bn.w,X);vec4 bU=bn;bU.w=bT;float bV=max(bl.w,X);vec4 bG=bl;bG.w=bV;vec3 bS=A.xyz;float bX=bN+Y;vec4 bc,bC=(ax?Y>0.:at)?bc=vec4(max(bG.xyz,bS),bV),vec4(min(bU.xyz,bS),bT):(bc=bG,bU);float bY=min(bC.w,Y);vec4 br=bC;br.w=bY;float bZ=max(bc.w,Y);vec4 ba=bc;ba.w=bZ;vec3 bg=I.xyz;float bK=bX+Z;vec4 bF=vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(vec4(q+o*(k?L:1.),K).xyz+p*(k?M:1.),am).xyz+r*(k?N:1.),ab).xyz+ai*(k?O:1.),ae).xyz+aM*(k?P:1.),aN).xyz+aR*(k?Q:1.),aS).xyz+aW*(k?R:1.),aX).xyz+aL*(k?S:1.),aK).xyz+ag*(k?T:1.),aj).xyz+bz*(k?U:1.),bu).xyz+bi*(k?V:1.),be).xyz+bL*(k?W:1.),bd).xyz+bW*(k?X:1.),bN).xyz+bS*(k?Y:1.),bX).xyz+bg*(k?Z:1.),bK),bI,b_=(ax?Z>0.:at)?bI=vec4(max(ba.xyz,bg),bZ),vec4(min(br.xyz,bg),bY):(bI=ba,br),bb,bh,cl;if(k){vec4 v,f,b;if(bK==0.){vec4 a=vec4(bF.xyz*.0625,u);b=a;f=a;v=bF;}else{vec3 a=bF.xyz*(16./bK);vec4 u=bF;u.x=a.x;u.y=a.y;u.z=a.z;b=bI;f=b_;v=u;}cl=b;bh=f;bb=v;}else cl=bI,bh=b_,bb=bF;vec4 bJ=x*16.-bb;vec3 bq=bJ.xyz*(k?J:1.);float bm=bq.x,bj=bq.y,bk=bq.z,cz=bJ.w;vec4 cw=a*16.-bb;vec3 ch=cw.xyz*(k?L:1.);float cx=ch.x,cy=ch.y,cm=ch.z,cb=cw.w;vec4 cv=b*16.-bb;vec3 ca=cv.xyz*(k?M:1.);float cj=ca.x,ce=ca.y,ck=ca.z,cK=cv.w;vec4 cf=c*16.-bb;vec3 cu=cf.xyz*(k?N:1.);float cd=cu.x,ci=cu.y,cE=cu.z,cB=cf.w;vec4 cA=l*16.-bb;vec3 cD=cA.xyz*(k?O:1.);float cH=cD.x,cI=cD.y,cL=cD.z,cN=cA.w;vec4 cG=n*16.-bb;vec3 cc=cG.xyz*(k?P:1.);float cS=cc.x,cW=cc.y,cX=cc.z,cg=cG.w;vec4 cs=B*16.-bb;vec3 cF=cs.xyz*(k?Q:1.);float cn=cF.x,cp=cF.y,cr=cF.z,cC=cs.w;vec4 cJ=C*16.-bb;vec3 cP=cJ.xyz*(k?R:1.);float cM=cP.x,cR=cP.y,c_=cP.z,co=cJ.w;vec4 cU=s*16.-bb;vec3 cq=cU.xyz*(k?S:1.);float cO=cq.x,cQ=cq.y,cT=cq.z,cV=cU.w;vec4 dw=D*16.-bb;vec3 cY=dw.xyz*(k?T:1.);float cZ=cY.x,ct=cY.y,dz=cY.z,dx=dw.w;vec4 dv=F*16.-bb;vec3 dy=dv.xyz*(k?U:1.);float dm=dy.x,db=dy.y,dj=dy.z,de=dv.w;vec4 da=H*16.-bb;vec3 df=da.xyz*(k?V:1.);float di=df.x,dk=df.y,dK=df.z,dd=da.w;vec4 du=G*16.-bb;vec3 dD=du.xyz*(k?W:1.);float dE=dD.x,dB=dD.y,dH=dD.z,dI=du.w;vec4 dc=E*16.-bb;vec3 dA=dc.xyz*(k?X:1.);float dL=dA.x,dN=dA.y,dS=dA.z,dW=dc.w;vec4 dF=A*16.-bb;vec3 dG=dF.xyz*(k?Y:1.);float ec=dG.x,dX=dG.y,dg=dG.z,dn=dF.w;vec4 ds=I*16.-bb;vec3 dP=ds.xyz*(k?Z:1.);float dl=dP.x,dt=dP.y,dM=dP.z,dr=bm*bm+cx*cx+cj*cj+cd*cd+cH*cH+cS*cS+cn*cn+cM*cM+cO*cO+cZ*cZ+dm*dm+di*di+dE*dE+dL*dL+ec*ec+dl*dl,dR=ds.w,dp=bj*bj+cy*cy+ce*ce+ci*ci+cI*cI+cW*cW+cp*cp+cR*cR+cQ*cQ+ct*ct+db*db+dk*dk+dB*dB+dN*dN+dX*dX+dt*dt,dC=bk*bk+cm*cm+ck*ck+cE*cE+cL*cL+cX*cX+cr*cr+c_*c_+cT*cT+dz*dz+dj*dj+dK*dK+dH*dH+dS*dS+dg*dg+dM*dM,dO=cz*cz+cb*cb+cK*cK+cB*cB+cN*cN+cg*cg+cC*cC+co*co+cV*cV+dx*dx+de*de+dd*dd+dI*dI+dW*dW+dn*dn+dR*dR,dZ=max(max(dr,dp),max(dC,dO))>64.?.015625:1.,d_=dr*dZ,dQ=(bm*bj+cx*cy+cj*ce+cd*ci+cH*cI+cS*cW+cn*cp+cM*cR+cO*cQ+cZ*ct+dm*db+di*dk+dE*dB+dL*dN+ec*dX+dl*dt)*dZ,dT=(bm*bk+cx*cm+cj*ck+cd*cE+cH*cL+cS*cX+cn*cr+cM*c_+cO*cT+cZ*dz+dm*dj+di*dK+dE*dH+dL*dS+ec*dg+dl*dM)*dZ,dV=(bm*cz+cx*cb+cj*cK+cd*cB+cH*cN+cS*cg+cn*cC+cM*co+cO*cV+cZ*dx+dm*de+di*dd+dE*dI+dL*dW+ec*dn+dl*dR)*dZ,dh=dp*dZ,dJ=(bj*bk+cy*cm+ce*ck+ci*cE+cI*cL+cW*cX+cp*cr+cR*c_+cQ*cT+ct*dz+db*dj+dk*dK+dB*dH+dN*dS+dX*dg+dt*dM)*dZ,dU=(bj*cz+cy*cb+ce*cK+ci*cB+cI*cN+cW*cg+cp*cC+cR*co+cQ*cV+ct*dx+db*de+dk*dd+dB*dI+dN*dW+dX*dn+dt*dR)*dZ,dq=dC*dZ,dY=(bk*cz+cm*cb+ck*cK+cE*cB+cL*cN+cX*cg+cr*cC+c_*co+cT*cV+dz*dx+dj*de+dK*dd+dH*dI+dS*dW+dg*dn+dM*dR)*dZ,ez=dO*dZ,ew=d_+.0001220703125,ex=dh+.0001220703125,el=dq+.0001220703125;vec4 ev=vec4(ew,ex,el,ez)*(1./max(max(ew,ex),max(el,ez)));float et=uintBitsToFloat(floatBitsToUint(ev.x)^floatBitsToUint(dV)&2147483648u),ey=uintBitsToFloat(floatBitsToUint(ev.y)^floatBitsToUint(dU)&2147483648u),ei=uintBitsToFloat(floatBitsToUint(ev.z)^floatBitsToUint(dY)&2147483648u),em=ev.w,eu=et*d_+ey*dQ+ei*dT+em*dV,er=et*dQ+ey*dh+ei*dJ+em*dU,ef=et*dT+ey*dJ+ei*dq+em*dY,ee=et*dV+ey*dU+ei*dY+em*ez,eM=max(max(abs(eu),abs(er)),max(abs(ef),abs(ee)));vec4 ea=vec4(eu,er,ef,ee)*(1./(eM==0.?1.:eM));float eE=ea.x,eb=ea.y,ej=ea.z,eH=ea.w,eR=eE*d_+eb*dQ+ej*dT+eH*dV,eU=eE*dQ+eb*dh+ej*dJ+eH*dU,eV=eE*dT+eb*dJ+ej*dq+eH*dY,eW=eE*dV+eb*dU+ej*dY+eH*ez,ep=max(max(abs(eR),abs(eU)),max(abs(eV),abs(eW)));bool ek=ep==0.;vec4 es=vec4(eR,eU,eV,eW)*(1./(ek?1.:ep));float eL=es.x,eS=es.y,en=es.z,eB=es.w,eO=dot(es,es),eh=d_+dh+dq+ez;bvec4 eD=bvec4(ek);vec4 eA=vec4(eD.x?1.:es.x,eD.y?1.:es.y,eD.z?1.:es.z,eD.w?0.:es.w),fa=bh;fa.w=_;vec4 fc=cl;fc.w=h;vec4 eZ=bb*.0625,eF=(fc-fa)*vec4(.897000014781952,1.55400002002716,.549000024795532,1);int fl;vec4 ff,fb;float fe;int fi;if(at){float b=abs(dot(vec4(eL*d_+eS*dQ+en*dT+eB*dV,eL*dQ+eS*dh+en*dJ+eB*dU,eL*dT+eS*dJ+en*dq+eB*dY,eL*dV+eS*dU+en*dY+eB*ez),es)*(1./(eO==0.?1.:eO)));vec4 a,v;float f;int u;if(j){float z=abs((dQ+(dQ<0.?-1.:1.)*.0078125)*inversesqrt(d_*dh+6103515625e-14)),b=abs((dT+(dT<0.?-1.:1.)*.0078125)*inversesqrt(d_*dq+6103515625e-14)),d=abs((dJ+(dJ<0.?-1.:1.)*.0078125)*inversesqrt(dh*dq+6103515625e-14));int m=d>max(z,b)?1:b>z?2:3;float c=eF.x,w=eF.y,i=c+w,t=eF.z;vec4 x=vec4(float(m==1),float(m==2),float(m==3),0);u=m;f=(i+t)*.0625+.01171875+(i*(1.-z)+(c+t)*(1.-b)+(w+t)*(1.-d));v=vec4(1)-x;a=x;}else u=0,f=uintBitsToFloat(2139095040u),v=vec4(1,1,1,0),a=vec4(0,0,0,1);fi=u;fe=f;fb=v;ff=a;fl=b/eh>.975000023841858?6:eh-b<dZ*.5?6:4;}else fi=0,fe=uintBitsToFloat(2139095040u),fb=vec4(1,1,1,0),ff=vec4(0,0,0,1),fl=4;bool eY=fl==4;vec4 fp;if(eY){vec4 v=eF;v.w=eF.w*1.5;fp=v;}else fp=eF;float ed=dot(ff,fp),eg=dot(fb,fp);int fu=fe<min(ed*.5+eg,eg*.5+ed)*.25+.03125?6:fl;bool fk=fu==4;float fw,fx,fy,fz,eK,eI,eT,e_,eQ,eq;vec4 eG,eP,eC,eJ;int eN;fw=fk?eN=int(ed<eg),eJ=ff,eC=fc*ff,eP=fa*ff,eG=eZ*fb,eq=d_*fb.x,eQ=dQ*fb.x*fb.y,e_=dT*fb.x*fb.z,eT=dV*fb.x*fb.w,eI=dh*fb.y,eK=dJ*fb.y*fb.z,fz=dU*fb.y*fb.w,fy=dq*fb.z,fx=dY*fb.z*fb.w,ez*fb.w:(eN=0,eJ=vec4(0),eC=vec4(0),eP=vec4(0),eG=eZ,eq=d_,eQ=dQ,e_=dT,eT=dV,eI=dh,eK=dJ,fz=dU,fy=dq,fx=dY,ez);float eX=eA.x,eo=eA.y,fm=eA.z,fE=eA.w,ft=eX*eq+eo*eQ+fm*e_+fE*eT,fM=eX*eQ+eo*eI+fm*eK+fE*fz,fR=eX*e_+eo*eK+fm*fy+fE*fx,fN=eX*eT+eo*fz+fm*fx+fE*fw,fO=max(max(abs(ft),abs(fM)),max(abs(fR),abs(fN)));bool fv=fO==0.;vec4 fs=vec4(ft,fM,fR,fN)*(1./(fv?1.:fO));bvec4 fD=bvec4(fv);vec4 fj=vec4(fD.x?1.:fs.x,fD.y?1.:fs.y,fD.z?1.:fs.z,fD.w?0.:fs.w),fL=fj*vec4(.897000014781952,1.55400002002716,.549000024795532,1);float fK=1./dot(fL,fL);vec4 fW=fL*fK*vec4(.897000014781952,1.55400002002716,.549000024795532,1);float fQ=dot(x,fW);bool fZ=!eY,fI=!fZ,fU=fI?J>0.:fZ;uint fG,fC;float fF,fV;if(fU){float b=fQ<uintBitsToFloat(2139095040u)?fQ:uintBitsToFloat(2139095040u),d=fQ>uintBitsToFloat(4286578688u)?fQ:uintBitsToFloat(4286578688u);fV=d;fF=b;fC=uint(fQ==d);fG=uint(fQ==b);}else fV=uintBitsToFloat(4286578688u),fF=uintBitsToFloat(2139095040u),fC=0u,fG=0u;uint fT=uint(fU);float fP=dot(a,fW),fY,f_;uint fg,fB,fh;if(fI?L>0.:fZ){bool f=fP<fF;uint b=f?0u:fG;float a=f?fP:fF;f=fP>fV;uint z=f?0u:fC;float d=f?fP:fV;fY=d;f_=a;fg=fT+uint(1);fB=fP==d?z+1u:z;fh=fP==a?b+1u:b;}else fY=fV,f_=fF,fg=fT,fB=fC,fh=fG;float fd=dot(b,fW),fH,fn;uint fq,fA,fJ;if(fI?M>0.:fZ){bool f=fd<f_;uint b=f?0u:fh;float a=f?fd:f_;f=fd>fY;uint z=f?0u:fB;float d=f?fd:fY;fH=d;fn=a;fq=fg+uint(1);fA=fd==d?z+1u:z;fJ=fd==a?b+1u:b;}else fH=fY,fn=f_,fq=fg,fA=fB,fJ=fh;float fS=dot(c,fW),fr,fo;uint fX,gz,gw;if(fI?N>0.:fZ){bool f=fS<fn;uint b=f?0u:fJ;float a=f?fS:fn;f=fS>fH;uint z=f?0u:fA;float d=f?fS:fH;fr=d;fo=a;fX=fq+uint(1);gz=fS==d?z+1u:z;gw=fS==a?b+1u:b;}else fr=fH,fo=fn,fX=fq,gz=fA,gw=fJ;float gu=dot(l,fW),gy,gx;uint gb,gf,gi;if(fI?O>0.:fZ){bool f=gu<fo;uint b=f?0u:gw;float a=f?gu:fo;f=gu>fr;uint z=f?0u:gz;float d=f?gu:fr;gy=d;gx=a;gb=fX+uint(1);gf=gu==d?z+1u:z;gi=gu==a?b+1u:b;}else gy=fr,gx=fo,gb=fX,gf=gz,gi=gw;float gd=dot(n,fW),ga,gl;uint gK,gC,gv;if(fI?P>0.:fZ){bool f=gd<gx;uint b=f?0u:gi;float a=f?gd:gx;f=gd>gy;uint z=f?0u:gf;float d=f?gd:gy;ga=d;gl=a;gK=gb+uint(1);gC=gd==d?z+1u:z;gv=gd==a?b+1u:b;}else ga=gy,gl=gx,gK=gb,gC=gf,gv=gi;float gN=dot(B,fW),gF,gG;uint gQ,gH,ge;if(fI?Q>0.:fZ){bool f=gN<gl;uint b=f?0u:gv;float a=f?gN:gl;f=gN>ga;uint z=f?0u:gC;float d=f?gN:ga;gF=d;gG=a;gQ=gK+uint(1);gH=gN==d?z+1u:z;ge=gN==a?b+1u:b;}else gF=ga,gG=gl,gQ=gK,gH=gC,ge=gv;float gP=dot(C,fW),gB,gV;uint gT,gh,gn;if(fI?R>0.:fZ){bool f=gP<gG;uint b=f?0u:ge;float a=f?gP:gG;f=gP>gF;uint z=f?0u:gH;float d=f?gP:gF;gB=d;gV=a;gT=gQ+uint(1);gh=gP==d?z+1u:z;gn=gP==a?b+1u:b;}else gB=gF,gV=gG,gT=gQ,gh=gH,gn=ge;float gS=dot(s,fW),gZ,gY;uint g_,gI,gJ;if(fI?S>0.:fZ){bool f=gS<gV;uint b=f?0u:gn;float a=f?gS:gV;f=gS>gB;uint z=f?0u:gh;float d=f?gS:gB;gZ=d;gY=a;g_=gT+uint(1);gI=gS==d?z+1u:z;gJ=gS==a?b+1u:b;}else gZ=gB,gY=gV,g_=gT,gI=gh,gJ=gn;float gO=dot(D,fW),gr,gA;uint gg,gE,gm;if(fI?T>0.:fZ){bool f=gO<gY;uint b=f?0u:gJ;float a=f?gO:gY;f=gO>gZ;uint z=f?0u:gI;float d=f?gO:gZ;gr=d;gA=a;gg=g_+uint(1);gE=gO==d?z+1u:z;gm=gO==a?b+1u:b;}else gr=gZ,gA=gY,gg=g_,gE=gI,gm=gJ;float gM=dot(F,fW),gc,gq;uint gX,gs,go;if(fI?U>0.:fZ){bool f=gM<gA;uint b=f?0u:gm;float a=f?gM:gA;f=gM>gr;uint z=f?0u:gE;float d=f?gM:gr;gc=d;gq=a;gX=gg+uint(1);gs=gM==d?z+1u:z;go=gM==a?b+1u:b;}else gc=gr,gq=gA,gX=gg,gs=gE,go=gm;float gL=dot(H,fW),gt,gU;uint gk,gD,gp;if(fI?V>0.:fZ){bool f=gL<gq;uint b=f?0u:go;float a=f?gL:gq;f=gL>gc;uint z=f?0u:gs;float d=f?gL:gc;gt=d;gU=a;gk=gX+uint(1);gD=gL==d?z+1u:z;gp=gL==a?b+1u:b;}else gt=gc,gU=gq,gk=gX,gD=gs,gp=go;float gR=dot(G,fW),gW,gj;uint hz,hw,hb;if(fI?W>0.:fZ){bool f=gR<gU;uint b=f?0u:gp;float a=f?gR:gU;f=gR>gt;uint z=f?0u:gD;float d=f?gR:gt;gW=d;gj=a;hz=gk+uint(1);hw=gR==d?z+1u:z;hb=gR==a?b+1u:b;}else gW=gt,gj=gU,hz=gk,hw=gD,hb=gp;float hu=dot(E,fW),hy,hx;uint hf,ha,hd;if(fI?X>0.:fZ){bool f=hu<gj;uint b=f?0u:hb;float a=f?hu:gj;f=hu>gW;uint z=f?0u:hw;float d=f?hu:gW;hy=d;hx=a;hf=hz+uint(1);ha=hu==d?z+1u:z;hd=hu==a?b+1u:b;}else hy=gW,hx=gj,hf=hz,ha=hw,hd=hb;float hi=dot(A,fW),hl,hF;uint hK,hG,hv;if(fI?Y>0.:fZ){bool f=hi<hx;uint b=f?0u:hd;float a=f?hi:hx;f=hi>hy;uint z=f?0u:ha;float d=f?hi:hy;hl=d;hF=a;hK=hf+uint(1);hG=hi==d?z+1u:z;hv=hi==a?b+1u:b;}else hl=hy,hF=hx,hK=hf,hG=ha,hv=hd;float hN=dot(I,fW),hC,he;uint ht,hR,hQ;if(fI?Z>0.:fZ){bool f=hN<hF;uint b=f?0u:hv;float a=f?hN:hF;f=hN>hl;uint z=f?0u:hG;float d=f?hN:hl;hC=d;he=a;ht=hK+uint(1);hR=hN==d?z+1u:z;hQ=hN==a?b+1u:b;}else hC=hl,he=hF,ht=hK,hR=hG,hQ=hv;float hB=dot(eG,fW),hT=he-hB,hh=hC-hB,hm=fk?eN!=0?.03125:.0625:.015625,hH=(hh-hT)*hm*(1.-clamp(float(hQ+hR)/float(ht),0.,1.)),hW=hT+hH,h_=hh-hH,hE=fk?.03125:.0078125,hZ=max(0.,(.635999977588654*hE*fK+.363999992609024*hE-h_+hW)*.5),ib=dot(eC-eP,eJ)*(eN!=0?.0625:.03125);vec3 id=eJ.xyz*ib,hs=eP.xyz+id;float hV=hs.x;vec4 ia=eP;ia.x=hV;ia.y=hs.y;ia.z=hs.z;vec3 hD=eC.xyz-id;float hY=hD.x;vec4 ic=eC;ic.x=hY;ic.y=hD.y;ic.z=hD.z;vec4 hc=eP.w>0.?vec4(hV,hs.yz,eP.w+eJ.w*ib):ia,hn=eC.w<1.?vec4(hY,hD.yz,eC.w-eJ.w*ib):ic,hA=clamp(fj*(hW-hZ)+eG,vec4(0),vec4(1))+hc,hP=clamp(fj*(h_+hZ)+eG,vec4(0),vec4(1))+hn;bool ii=fu==6;vec4 hI,hr;uint it,iu;if(ii){vec4 b=trunc(hA*127.5)*2.,f=hA*255.-b;float a=hA.w;uint d=a==1.?1u:a==0.?0u:uint(f.x+f.y+f.z+f.w>=2.);f=trunc(hP*127.5)*2.;vec4 c=hP*255.-f;a=hP.w;uint m=a==1.?1u:a==0.?0u:uint(c.x+c.y+c.z+c.w>=2.);iu=m;it=d;hr=f+vec4(float(m));hI=b+vec4(float(d));}else{bool f=fi==1;float d=hA.x,c=f?63.:31.,a=f?4.0625:8.25,u=trunc(d*c)*a,z=trunc(u);u=trunc(u+a);f=fi==2;float b=hA.y,v=f?63.:31.,e=f?4.0625:8.25,g=trunc(b*v)*e,w=trunc(g);g=trunc(g+e);f=fi==3;float m=hA.z,i=f?63.:31.,x=f?4.0625:8.25,N=trunc(m*i)*x,y=trunc(N);N=trunc(N+x);f=fi==0;float E=hA.w,W=f?63.:31.,Z=f?4.0625:8.25,Q=trunc(E*W)*Z,h=trunc(Q),R=trunc(Q+Z),k=hP.x,S=trunc(k*c)*a,K=trunc(S),M=trunc(S+a),L=hP.y,T=trunc(L*v)*e,I=trunc(T);T=trunc(T+e);S=hP.z;Q=trunc(S*i)*x;a=trunc(Q);c=trunc(Q+x);e=hP.w;v=trunc(e*W)*Z;x=trunc(v);i=trunc(v+Z);iu=t;it=t;hr=vec4(255.*k>.5*(K+M)?M:K,255.*L>.5*(I+T)?T:I,255.*S>.5*(a+c)?c:a,255.*e>.5*(x+i)?i:x);hI=vec4(255.*d>.5*(z+u)?u:z,255.*b>.5*(w+g)?g:w,255.*m>.5*(y+N)?N:y,255.*E>.5*(h+R)?R:h);}vec4 hL=hr-hI,hS=fk?vec4(float(fi==1),float(fi==2),float(fi==3),float(fi==0)):vec4(0),iw=hL*(vec4(1)-hS)*vec4(.0035176472738385,.0060941181145608,.002152941422537,.0039215688593686),hU=iw*(1./dot(iw,iw))*vec4(.897000014781952,1.55400002002716,.549000024795532,1);float iz=dot(hI,hU)*.0039215688593686;uint iv;vec4 ix;float iy;if(fk){vec4 f=hS*dot(hL,hS)*.0039215688593686;f*=1./dot(f,f);float z=dot(hI,f)*.0039215688593686;bool d=eN==1;float w=d?z:iz;bvec4 e=bvec4(d);vec4 i=vec4(e.x?f.x:hU.x,e.y?f.y:hU.y,e.z?f.z:hU.z,e.w?f.w:hU.w);iy=d?iz:z;ix=vec4(e.x?hU.x:f.x,e.y?hU.y:f.y,e.z?hU.z:f.z,e.w?hU.w:f.w);iv=uint(3.*clamp(dot(x,i)-w,0.,1.)+.5)|uint(3.*clamp(dot(a,i)-w,0.,1.)+.5)<<uint(2)|uint(3.*clamp(dot(b,i)-w,0.,1.)+.5)<<uint(4)|uint(3.*clamp(dot(c,i)-w,0.,1.)+.5)<<uint(6)|uint(3.*clamp(dot(l,i)-w,0.,1.)+.5)<<uint(8)|uint(3.*clamp(dot(n,i)-w,0.,1.)+.5)<<uint(10)|uint(3.*clamp(dot(B,i)-w,0.,1.)+.5)<<uint(12)|uint(3.*clamp(dot(C,i)-w,0.,1.)+.5)<<uint(14)|uint(3.*clamp(dot(s,i)-w,0.,1.)+.5)<<uint(16)|uint(3.*clamp(dot(D,i)-w,0.,1.)+.5)<<uint(18)|uint(3.*clamp(dot(F,i)-w,0.,1.)+.5)<<uint(20)|uint(3.*clamp(dot(H,i)-w,0.,1.)+.5)<<uint(22)|uint(3.*clamp(dot(G,i)-w,0.,1.)+.5)<<uint(24)|uint(3.*clamp(dot(E,i)-w,0.,1.)+.5)<<uint(26)|uint(3.*clamp(dot(A,i)-w,0.,1.)+.5)<<uint(28)|uint(3.*clamp(dot(I,i)-w,0.,1.)+.5)<<uint(30);}else iy=iz,ix=hU,iv=0u;float hj=fk?7.:15.;int hM=fk?3:4,hp=hM*2,hO=hM*3,hg=hM*4,hX=hM*5,hk=hM*6,hJ=hM*7;uint ho=uint(hj*clamp(dot(x,ix)-iy,0.,1.)+.5)|uint(hj*clamp(dot(a,ix)-iy,0.,1.)+.5)<<uint(hM)|uint(hj*clamp(dot(b,ix)-iy,0.,1.)+.5)<<uint(hp)|uint(hj*clamp(dot(c,ix)-iy,0.,1.)+.5)<<uint(hO)|uint(hj*clamp(dot(l,ix)-iy,0.,1.)+.5)<<uint(hg)|uint(hj*clamp(dot(n,ix)-iy,0.,1.)+.5)<<uint(hX)|uint(hj*clamp(dot(B,ix)-iy,0.,1.)+.5)<<uint(hk)|uint(hj*clamp(dot(C,ix)-iy,0.,1.)+.5)<<uint(hJ),hq=uint(hj*clamp(dot(s,ix)-iy,0.,1.)+.5)|uint(hj*clamp(dot(D,ix)-iy,0.,1.)+.5)<<uint(hM)|uint(hj*clamp(dot(F,ix)-iy,0.,1.)+.5)<<uint(hp)|uint(hj*clamp(dot(H,ix)-iy,0.,1.)+.5)<<uint(hO)|uint(hj*clamp(dot(G,ix)-iy,0.,1.)+.5)<<uint(hg)|uint(hj*clamp(dot(E,ix)-iy,0.,1.)+.5)<<uint(hX)|uint(hj*clamp(dot(A,ix)-iy,0.,1.)+.5)<<uint(hk)|uint(hj*clamp(dot(I,ix)-iy,0.,1.)+.5)<<uint(hJ),ie,iN;ie=fk?iN=hq>>uint(8),ho|hq<<uint(24):(iN=hq,hq);uint il=fk?iv:ho;uvec3 iF=uvec3(il,ie,iN);uint iQ=1u<<uint(fu);uvec4 ih;if(ii){bool f=(il&8u)!=0u;uvec2 a=f?uvec2(~il,~ie):iF.xy;bvec4 b=bvec4(f);vec4 d=vec4(b.x?hI.x:hr.x,b.y?hI.y:hr.y,b.z?hI.z:hr.z,b.w?hI.w:hr.w),i=vec4(b.x?hr.x:hI.x,b.y?hr.y:hI.y,b.z?hr.z:hI.z,b.w?hr.w:hI.w);uint g=(a.x&7u)<<uint(1)|a.x&4294967280u,e=uint(d.y)>>uint(1);uvec4 v=uvec4(iQ|uint(i.x)>>uint(1)<<7u|uint(d.x)>>uint(1)<<14u|uint(i.y)>>uint(1)<<21u|e<<28u,e>>4u|uint(i.z)>>uint(1)<<3u|uint(d.z)>>uint(1)<<10u|uint(i.w)>>uint(1)<<17u|uint(d.w)>>uint(1)<<24u|it<<31u,g,a.y);v.z=g|iu;ih=v;}else{vec4 f=vec4(float(fi==1),float(fi==2),float(fi==3),float(fi==0)),d=vec4(1)-f,a=hI*d+f*hI.w;d=hr*d+f*a.w;uvec3 b;uint g,v,z,e;if((il&2u)!=0u){bool f=eN==0;uvec3 a=iF;a.x=~il;e=f?0u:5u;z=f?5u:0u;v=f?6u:0u;g=f?0u:6u;b=a;}else e=5u,z=0u,v=6u,g=0u,b=iF;uint u=(b.x&1u)+(b.x&4294967293u)>>uint(1);uvec3 i=b;i.x=u;uvec3 m;uint w,x,y,c;if((b.y&4u)!=0u){bool f=eN==1;c=f?0u:e;y=f?5u:z;x=f?v:0u;w=f?g:6u;m=uvec3(u,~b.y,b.z^65535u);}else c=e,y=z,x=v,w=g,m=i;u=(m.y&3u)+(m.y&4294967291u)>>uint(1)|m.z<<uint(31);y=(uint(a.x)>>uint(3)|(uint(a.y)&248u)<<uint(7)|(uint(a.z)&248u)<<uint(17))<<y|(uint(d.x)>>uint(3)|(uint(d.y)&248u)<<uint(7)|(uint(d.z)&248u)<<uint(17))<<c;c=u>>15u;uvec4 t=uvec4(iQ&4294967071u|uint(fi)<<5u|uint(eN)<<7u|y<<8u,y>>24u|(uint(dot(hI,f))>>uint(2)<<w|uint(dot(hr,f))>>uint(2)<<x)<<6u|m.x<<18u,m.x>>14u|u<<17u,c);t.w=c|m.z>>uint(1)<<17u;ih=t;}w=ih;}