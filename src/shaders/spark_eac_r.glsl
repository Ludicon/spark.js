uniform mediump sampler2D u;layout(location=0)out uvec4 f;void main(){ivec2 c=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));int x=c.x,i=c.y,t=x+1,g=x+2,l=x+3,n=i+1,y=i+2,C=i+3;float m[16]=float[](texelFetch(u,c,0).x,texelFetch(u,ivec2(t,i),0).x,texelFetch(u,ivec2(g,i),0).x,texelFetch(u,ivec2(l,i),0).x,texelFetch(u,ivec2(x,n),0).x,texelFetch(u,ivec2(t,n),0).x,texelFetch(u,ivec2(g,n),0).x,texelFetch(u,ivec2(l,n),0).x,texelFetch(u,ivec2(x,y),0).x,texelFetch(u,ivec2(t,y),0).x,texelFetch(u,ivec2(g,y),0).x,texelFetch(u,ivec2(l,y),0).x,texelFetch(u,ivec2(x,C),0).x,texelFetch(u,ivec2(t,C),0).x,texelFetch(u,ivec2(g,C),0).x,texelFetch(u,ivec2(l,C),0).x),D[16]=m,F[16]=m,b,v,J=F[0];v=F[0];b=F[0];for(int u=1;u<16;){J+=F[u];v=max(v,F[u]);b=min(b,F[u]);u++;continue;}b*=255.;v*=255.;float e=v-b;bool s=e>8.;e=clamp(trunc(e*(s?.0412900000810623:.0543290004134178)),1.,15.);float G=510./e;b=30.-trunc(.5*(e+b+v))*(2./e);uint E=s?2857717760u:4289374800u,B=s?1073741738u:1073741823u,A=~(int(s)==0?28143u:14526u),H=clamp(uint(D[0]*G+b),0u,59u),I=uint(H>28u);H-=29u;bool K=I==0u;H=K?~H:H;H=(H>15u?B:E)>>(2u*H&31u)&3u;v=float(A>>4u*H&15u);uint L=clamp(uint(D[4]*G+b),0u,59u),M=uint(L>28u);L-=29u;bool N=M==0u;L=N?~L:L;L=(L>15u?B:E)>>(2u*L&31u)&3u;float O=float(A>>4u*L&15u);uint P=clamp(uint(D[8]*G+b),0u,59u),Q=uint(P>28u);P-=29u;bool R=Q==0u;P=R?~P:P;P=(P>15u?B:E)>>(2u*P&31u)&3u;float S=float(A>>4u*P&15u);uint T=clamp(uint(D[12]*G+b),0u,59u),U=uint(T>28u);T-=29u;bool V=U==0u;T=V?~T:T;T=(T>15u?B:E)>>(2u*T&31u)&3u;float W=float(A>>4u*T&15u);uint X=clamp(uint(D[1]*G+b),0u,59u),Y=uint(X>28u);X-=29u;bool Z=Y==0u;X=Z?~X:X;X=(X>15u?B:E)>>(2u*X&31u)&3u;float _=float(A>>4u*X&15u);uint a=clamp(uint(D[5]*G+b),0u,59u),d=uint(a>28u);a=a-29u;bool h=d==0u;uint j=h?~a:a,k=(j>15u?B:E)>>(2u*j&31u)&3u;float o=float(A>>4u*k&15u);uint p=clamp(uint(D[9]*G+b),0u,59u),q=uint(p>28u),r=p-29u;bool w=q==0u;uint z=w?~r:r,at=(z>15u?B:E)>>(2u*z&31u)&3u;float au=float(A>>4u*at&15u);uint am=clamp(uint(D[13]*G+b),0u,59u),ab=uint(am>28u),ax=am-29u;bool as=ab==0u;uint aA=as?~ax:ax,ak=(aA>15u?B:E)>>(2u*aA&31u)&3u;float aB=float(A>>4u*ak&15u);uint aH=(H|I<<2u)<<uint(21)|(L|M<<2u)<<uint(18)|(P|Q<<2u)<<uint(15)|(T|U<<2u)<<uint(12)|(X|Y<<2u)<<uint(9)|(k|d<<2u)<<uint(6)|(at|q<<2u)<<uint(3)|(ak|ab<<2u),aa=clamp(uint(D[2]*G+b),0u,59u),aI=uint(aa>28u),ag=aa-29u;bool aK=aI==0u;uint aL=aK?~ag:ag,av=(aL>15u?B:E)>>(2u*aL&31u)&3u;float aE=float(A>>4u*av&15u);uint aP=clamp(uint(D[6]*G+b),0u,59u),aM=uint(aP>28u),al=aP-29u;bool aN=aM==0u;uint aT=aN?~al:al,aQ=(aT>15u?B:E)>>(2u*aT&31u)&3u;float ay=float(A>>4u*aQ&15u);uint aX=clamp(uint(D[10]*G+b),0u,59u),aU=uint(aX>28u),ar=aX-29u;bool aR=aU==0u;uint ae=aR?~ar:ar,aY=(ae>15u?B:E)>>(2u*ae&31u)&3u;float an=float(A>>4u*aY&15u);uint ap=clamp(uint(D[14]*G+b),0u,59u),ad=uint(ap>28u),aO=ap-29u;bool aV=ad==0u;uint aj=aV?~aO:aO,ai=(aj>15u?B:E)>>(2u*aj&31u)&3u;float aC=float(A>>4u*ai&15u);uint aq=clamp(uint(D[3]*G+b),0u,59u),aG=uint(aq>28u),aS=aq-29u;bool aZ=aG==0u;uint az=aZ?~aS:aS,aJ=(az>15u?B:E)>>(2u*az&31u)&3u;float aW=float(A>>4u*aJ&15u);uint a_=clamp(uint(D[7]*G+b),0u,59u),ac=uint(a_>28u),ao=a_-29u;bool ah=ac==0u;uint af=ah?~ao:ao,aw=(af>15u?B:E)>>(2u*af&31u)&3u;float bu=float(A>>4u*aw&15u);uint aD=clamp(uint(D[11]*G+b),0u,59u),aF=uint(aD>28u),bx=aD-29u;bool bo=aF==0u;uint bA=bo?~bx:bx,bk=(bA>15u?B:E)>>(2u*bA&31u)&3u;float bb=float(A>>4u*bk&15u);uint ba=clamp(uint(D[15]*G+b),0u,59u),bd=uint(ba>28u),bB=ba-29u;bool bs=bd==0u;uint bH=bs?~bB:bB,bv=(bH>15u?B:E)>>(2u*bH&31u)&3u;float bE=float(A>>4u*bv&15u);uint bL=(av|aI<<2u)<<uint(21)|(aQ|aM<<2u)<<uint(18)|(aY|aU<<2u)<<uint(15)|(ai|ad<<2u)<<uint(12)|(aJ|aG<<2u)<<uint(9)|(aw|ac<<2u)<<uint(6)|(bk|aF<<2u)<<uint(3)|(bv|bd<<2u),be=uint(clamp(J*15.9375-((K?-1.-v:v)+(N?-1.-O:O)+(R?-1.-S:S)+(V?-1.-W:W)+(Z?-1.-_:_)+(h?-1.-o:o)+(w?-1.-au:au)+(as?-1.-aB:aB)+(aK?-1.-aE:aE)+(aN?-1.-ay:ay)+(aR?-1.-an:an)+(aV?-1.-aC:aC)+(aZ?-1.-aW:aW)+(ah?-1.-bu:bu)+(bo?-1.-bb:bb)+(bs?-1.-bE:bE))*e*.0625+.5,0.,255.))|(uint(e)<<uint(12)|(s?2u:13u)<<uint(8))|aH&16711680u|(aH&65280u)<<uint(16),bj=aH&255u|(bL&16711680u)>>uint(8)|(bL&65280u)<<uint(8)|(bL&255u)<<uint(24);f=uvec4(be&65535u,be>>uint(16),bj&65535u,bj>>uint(16));}
