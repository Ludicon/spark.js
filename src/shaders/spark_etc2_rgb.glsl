const float u[7]=float[](5.,11.,19.,27.5,39.,52.,69.5);uniform mediump sampler2D z;layout(location=0)out uvec4 i;void main(){ivec2 m=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));int a=m.x,y=m.y;vec4 t=texelFetch(z,m,0);vec3 x=t.xyz;int r=a+1;vec4 f=texelFetch(z,ivec2(r,y),0);vec3 c=f.xyz;int v=a+2;vec4 d=texelFetch(z,ivec2(v,y),0);vec3 n=d.xyz;int g=a+3;vec4 s=texelFetch(z,ivec2(g,y),0);vec3 C=s.xyz;int b=y+1;vec4 D=texelFetch(z,ivec2(a,b),0);vec3 k=D.xyz,F=k;vec4 H=texelFetch(z,ivec2(r,b),0);vec3 G=H.xyz,E=G;vec4 B=texelFetch(z,ivec2(v,b),0);vec3 A=B.xyz,I=A;vec4 J=texelFetch(z,ivec2(g,b),0);vec3 K=J.xyz,L=K;b=y+2;vec4 M=texelFetch(z,ivec2(a,b),0);vec3 N=M.xyz;vec4 O=texelFetch(z,ivec2(r,b),0);vec3 P=O.xyz;vec4 Q=texelFetch(z,ivec2(v,b),0);vec3 R=Q.xyz;vec4 S=texelFetch(z,ivec2(g,b),0);vec3 T=S.xyz;b=y+3;vec4 U=texelFetch(z,ivec2(a,b),0);vec3 V=U.xyz,W=V;vec4 X=texelFetch(z,ivec2(r,b),0);vec3 Y=X.xyz,Z=Y;vec4 _=texelFetch(z,ivec2(v,b),0);vec3 e=_.xyz,h=e;vec4 j=texelFetch(z,ivec2(g,b),0);vec3 l=j.xyz,o=l;uvec2 p;do{vec3 y=x+c+k+G,z=n+C+A+K,v=N+P+V+Y,i=R+T+e+l;float b=t.x+t.y+t.z,m=f.x+f.y+f.z,a=d.x+d.y+d.z,g=s.x+s.y+s.z,r=D.x+D.y+D.z,q=H.x+H.y+H.z,w=B.x+B.y+B.z,at=J.x+J.y+J.z,au=M.x+M.y+M.z,ab=O.x+O.y+O.z,az=Q.x+Q.y+Q.z,ax=S.x+S.y+S.z,am=U.x+U.y+U.z,ay=X.x+X.y+X.z,ar=_.x+_.y+_.z,ag=j.x+j.y+j.z,ak=min(min(b,m),min(r,q)),aa=min(min(a,g),min(w,at)),av=min(min(au,ab),min(am,ay)),ae=min(min(az,ax),min(ar,ag)),ai=max(max(b,m),max(r,q)),al=max(max(a,g),max(w,at)),aq=max(max(au,ab),max(am,ay)),an=max(max(az,ax),max(ar,ag)),aC=min(ak,aa),ap=min(av,ae),aA=min(ak,av),aG=min(aa,ae);uint aB=uint(max(ak,aa)-aC+(max(av,ae)-ap)<max(ak,av)-aA+(max(aa,ae)-aG));bool aD=aB!=0u;int aE=aD?8:2;vec3 aw,aK;ak=aD?aK=i+v,aw=y+z,aa=max(aq,an),max(ai,al):(aK=i+z,aw=y+v,aa=max(al,an),max(ai,aq));av=aD?ap:aG;ae=aD?aC:aA;ai=max(ak,aa)-min(ae,av);uvec2 ad;do{if(ai>=.18823529779911){ad=uvec2(0u);break;}vec3 u=n*.5,y=E*.25,z=I*.25,v=N*.5,i=P*.25,b=R*.5,m=o*.75,a=c*.25+u+C*.75+y+I*.5+L*.75+i+b+T*.75+Z*.25+h*.5+m,d=F*.25+y+z+L*.25+v+P*.5+b+T*.5+W*.75+Z*.75+h*.75+m,l=x+c*.75+u+C*.25+F*.75+E*.5+z+v+i+T*-.25+W*.25+h*-.25+o*-.5;m=x*x+c*c+n*n+C*C+F*F+E*E+I*I+L*L+N*N+P*P+R*R+T*T+W*W+Z*Z+h*h+o*o;b=vec3(a.x,d.x,l);i=vec3(a.y,d.y,l.y);v=vec3(a.z,d.z,l.z);z=clamp(mat3(vec3(.487500011920929,-.3125,-.0125000001862645),vec3(-.3125,.487500011920929,-.0125000001862645),vec3(-.0125000001862645,-.0125000001862645,.287499994039536))*b,vec3(0),vec3(1));y=clamp(mat3(vec3(.487500011920929,-.3125,-.0125000001862645),vec3(-.3125,.487500011920929,-.0125000001862645),vec3(-.0125000001862645,-.0125000001862645,.287499994039536))*i,vec3(0),vec3(1));u=clamp(mat3(vec3(.487500011920929,-.3125,-.0125000001862645),vec3(-.3125,.487500011920929,-.0125000001862645),vec3(-.0125000001862645,-.0125000001862645,.287499994039536))*v,vec3(0),vec3(1));if(ai>=.0313725508749485){float a=z.x,l=z.y,x=y.x,E=y.y,t=u.x,d=u.y;vec3 k=vec3(m.x+3.5*dot(z,z)+2.*(a*l*2.25+(a+l)*z.z*.25-dot(z,b)),m.y+3.5*dot(y,y)+2.*(x*E*2.25+(x+E)*y.z*.25-dot(y,i)),m.z+3.5*dot(u,u)+2.*(t*d*2.25+(t+d)*u.z*.25-dot(u,v)));if(dot(k,k)>.0000360000012734){ad=uvec2(0u);break;}}uint f=uint(z.x*63.+.5),r=uint(z.z*63.+.5),t=uint(y.z*127.+.5),g=uint(u.z*63.+.5);f=f&1u|f<<uint(1)&124u;uvec2 k=uvec2(f,uint(u.y*63.+.5)|uint(y.y*127.+.5)<<uint(6)|uint(z.y*63.+.5)<<uint(13)|(uint(u.x*63.+.5)|uint(y.x*127.+.5)<<uint(6))<<uint(19));uint p=g&24u;f=f|((g&7u)<<uint(7)|p<<uint(8)|(g&32u)<<uint(11))|((t&63u)<<uint(17)|(t&64u)<<uint(18))|r<<uint(25);k.x=f;uvec2 D;if((r&32u)==0u){uvec2 u=k;u.x=f|2147483648u;D=u;}else D=k;if((t&32u)==0u){uvec2 u=D;u.x=D.x|8388608u;k=u;}else k=D;p=k.x|(3-int((g&6u)>>uint(1))>=int(p>>uint(3))?1026u:57346u);ad=uvec2(p>>uint(8)&65280u|p>>uint(24)&255u|p<<uint(8)&16711680u|p<<uint(24)&4278190080u,k.y>>uint(8)&65280u|k.y>>uint(24)&255u|k.y<<uint(8)&16711680u|k.y<<uint(24)&4278190080u);break;}while(false);if(ad.x!=0u){p=ad;break;}ai=(ak-ae)*85.;uint af=ai<27.?0u:ai<50.?1u:ai<77.?2u:ai<111.?3u:ai<152.?4u:ai<202.?5u:6u;ai=u[af]*.0117647061124444;al=(aa-av)*85.;uint aF=al<27.?0u:al<50.?1u:al<77.?2u:al<111.?3u:al<152.?4u:al<202.?5u:6u;al=u[aF]*.0117647061124444;ak=(ak+ae)*.5;aa=(aa+av)*.5;b-=ak;uint aH=uint(b<0.),aI=uint(abs(b)>ai);uint aJ[8]=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int aV=int(aJ[af]);aV=(aI!=0u?aV>>8:aV)&255;b=float(aH!=0u?-aV:aV);aD=(1&aE)!=0;uint aY,ao;if(aD){float u=m-aa;aY=uint(u<0.);ao=uint(abs(u)>al);}else{float u=m-ak;aY=uint(u<0.);ao=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);aV=int(aJ[aD?aF:af]);aV=(ao!=0u?aV>>8:aV)&255;aV=aY!=0u?-aV:aV;m=float(aV);b=aD?b:b+m;float aN=aD?m:0.;bool aL=(2&aE)!=0;uint aM,aO;if(aL){float u=a-aa;aM=uint(u<0.);aO=uint(abs(u)>al);}else{float u=a-ak;aM=uint(u<0.);aO=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int aP=int(aJ[aL?aF:af]),aQ=aO!=0u?aP>>8:aP,aR=aQ&255,aS=aM!=0u?-aR:aR;float bb=float(aS),aT,ac=aL?aT=aN+bb,b:(aT=aN,b+bb);bool aU=(3&aE)!=0;uint aW,aX;if(aU){float u=g-aa;aW=uint(u<0.);aX=uint(abs(u)>al);}else{float u=g-ak;aW=uint(u<0.);aX=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int bu=int(aJ[aU?aF:af]),aZ=aX!=0u?bu>>8:bu,a_=aZ&255,ah=aW!=0u?-a_:a_;float bz=float(ah),aj,as=aU?aj=aT+bz,ac:(aj=aT,ac+bz);bool bs=(4&aE)!=0;uint bo,bk;if(bs){float u=r-aa;bo=uint(u<0.);bk=uint(abs(u)>al);}else{float u=r-ak;bo=uint(u<0.);bk=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int br=int(aJ[bs?aF:af]),ba=bk!=0u?br>>8:br,bF=ba&255,bi=bo!=0u?-bF:bF;float bl=float(bi),by,bx=bs?by=aj+bl,as:(by=aj,as+bl);bool bE=(5&aE)!=0;uint bJ,bp;if(bE){float u=q-aa;bJ=uint(u<0.);bp=uint(abs(u)>al);}else{float u=q-ak;bJ=uint(u<0.);bp=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int bv=int(aJ[bE?aF:af]),bg=bp!=0u?bv>>8:bv,bD=bg&255,be=bJ!=0u?-bD:bD;float bm=float(be),bT,bV=bE?bT=by+bm,bx:(bT=by,bx+bm);bool bd=(6&aE)!=0;uint bf,bO;if(bd){float u=w-aa;bf=uint(u<0.);bO=uint(abs(u)>al);}else{float u=w-ak;bf=uint(u<0.);bO=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int bw=int(aJ[bd?aF:af]),bt=bO!=0u?bw>>8:bw,bK=bt&255,bn=bf!=0u?-bK:bK;float cb=float(bn),bN,bC=bd?bN=bT+cb,bV:(bN=bT,bV+cb);bool bL=(7&aE)!=0;uint bY,bX;if(bL){float u=at-aa;bY=uint(u<0.);bX=uint(abs(u)>al);}else{float u=at-ak;bY=uint(u<0.);bX=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int bj=int(aJ[bL?aF:af]),bM=bX!=0u?bj>>8:bj,bA=bM&255,bq=bY!=0u?-bA:bA;float cl=float(bq),bP,bc=bL?bP=bN+cl,bC:(bP=bN,bC+cl);bool bU=(8&aE)!=0;uint bW,bB;if(bU){float u=au-aa;bW=uint(u<0.);bB=uint(abs(u)>al);}else{float u=au-ak;bW=uint(u<0.);bB=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int bG=int(aJ[bU?aF:af]),bQ=bB!=0u?bG>>8:bG,bR=bQ&255,cu=bW!=0u?-bR:bR;float ci=float(cu),bI,bZ=bU?bI=bP+ci,bc:(bI=bP,bc+ci);bool bS=(9&aE)!=0;uint bH,b_;if(bS){float u=ab-aa;bH=uint(u<0.);b_=uint(abs(u)>al);}else{float u=ab-ak;bH=uint(u<0.);b_=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int cz=int(aJ[bS?aF:af]),bh=b_!=0u?cz>>8:cz,ck=bh&255,cE=bH!=0u?-ck:ck;float cy=float(cE),cx,cF=bS?cx=bI+cy,bZ:(cx=bI,bZ+cy);bool ch=(10&aE)!=0;uint cJ,ca;if(ch){float u=az-aa;cJ=uint(u<0.);ca=uint(abs(u)>al);}else{float u=az-ak;cJ=uint(u<0.);ca=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int cv=int(aJ[ch?aF:af]),cg=ca!=0u?cv>>8:cv,cD=cg&255,ce=cJ!=0u?-cD:cD;float cm=float(ce),cr,cC=ch?cr=cx+cm,cF:(cr=cx,cF+cm);bool cd=(11&aE)!=0;uint cf,cp;if(cd){float u=ax-aa;cf=uint(u<0.);cp=uint(abs(u)>al);}else{float u=ax-ak;cf=uint(u<0.);cp=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int cT=int(aJ[cd?aF:af]),ct=cp!=0u?cT>>8:cT,cV=ct&255,cn=cf!=0u?-cV:cV;float cY=float(cn),cN,cc=cd?cN=cr+cY,cC:(cN=cr,cC+cY);bool cL=(12&aE)!=0;uint cW,co;if(cL){float u=am-aa;cW=uint(u<0.);co=uint(abs(u)>al);}else{float u=am-ak;cW=uint(u<0.);co=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int cw=int(aJ[cL?aF:af]),cM=co!=0u?cw>>8:cw,cK=cM&255,cq=cW!=0u?-cK:cK;float cP=float(cq),cI,cR=cL?cI=cN+cP,cc:(cI=cN,cc+cP);bool cU=(13&aE)!=0;uint cH,cO;if(cU){float u=ay-aa;cH=uint(u<0.);cO=uint(abs(u)>al);}else{float u=ay-ak;cH=uint(u<0.);cO=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int cj=int(aJ[cU?aF:af]),cQ=cO!=0u?cj>>8:cj,cA=cQ&255,cS=cH!=0u?-cA:cA;float du=float(cS),cG,cZ=cU?cG=cI+du,cR:(cG=cI,cR+du);bool cs=(14&aE)!=0;uint cX,cB;if(cs){float u=ar-aa;cX=uint(u<0.);cB=uint(abs(u)>al);}else{float u=ar-ak;cX=uint(u<0.);cB=uint(abs(u)>ai);}aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int dz=int(aJ[cs?aF:af]),c_=cB!=0u?dz>>8:dz,dk=c_&255,di=cX!=0u?-dk:dk;float db=float(di),dy,dx=cs?dy=cG+db,cZ:(dy=cG,cZ+db);bool dl=(15&aE)!=0;uint da,dJ;if(dl){float u=ag-aa;da=uint(u<0.);dJ=uint(abs(u)>al);}else{float u=ag-ak;da=uint(u<0.);dJ=uint(abs(u)>ai);}uint dp=aI|aH<<uint(16)|(ao<<uint(4)|aY<<uint(20))|(aO<<uint(8)|aM<<uint(24))|(aX<<uint(12)|aW<<uint(28))|(bk<<uint(1)|bo<<uint(17))|(bp<<uint(5)|bJ<<uint(21))|(bO<<uint(9)|bf<<uint(25))|(bX<<uint(13)|bY<<uint(29))|(bB<<uint(2)|bW<<uint(18))|(b_<<uint(6)|bH<<uint(22))|(ca<<uint(10)|cJ<<uint(26))|(cp<<uint(14)|cf<<uint(30))|(co<<uint(3)|cW<<uint(19))|(cO<<uint(7)|cH<<uint(23))|(cB<<uint(11)|cX<<uint(27))|(dJ<<uint(15)|da<<uint(31));aJ=uint[](2050u,4357u,7433u,10765u,15378u,20504u,27169u,46895u);int dv=int(aJ[dl?aF:af]),dg=dJ!=0u?dv>>8:dv,dF=dg&255,dE=da!=0u?-dF:dF;float dm=float(dE),dr,dI=dl?dr=dy+dm,dx:(dr=dy,dx+dm);vec3 dd=clamp((aw-vec3(dI*.0039215688593686))*.125,vec3(0),vec3(1)),df=clamp((aK-vec3(dr*.0039215688593686))*.125,vec3(0),vec3(1));float dT=dd.x,de=trunc(round(dT*31.)*8.25),dW=dd.y,dV=trunc(round(dW*31.)*8.25),dN=dd.z,dn=trunc(round(dN*31.)*8.25),dP=df.x,dh=df.y,dC=df.z;vec3 ec=trunc((vec3(trunc(round(dP*31.)*8.25),trunc(round(dh*31.)*8.25),trunc(round(dC*31.)*8.25))-vec3(de,dV,dn))*.125);float dO=ec.x;bool dq=max(max(abs(dO),abs(ec.y)),abs(ec.z))<4.;uint dD;if(dq){vec3 u;if(dO<0.){vec3 c=ec;c.x=dO+8.;u=c;}else u=ec;vec3 c;if(u.y<0.){vec3 f=u;f.y=u.y+8.;c=f;}else c=u;if(c.z<0.){vec3 f=c;f.z=c.z+8.;u=f;}else u=c;dD=uint(dn)&248u|(uint(dV)&248u)<<uint(8)|(uint(de)&248u)<<uint(16)|(uint(u.z)&7u|(uint(u.y)&7u)<<uint(8)|(uint(u.x)&7u)<<uint(16));}else dD=uint(trunc(round(dN*15.)*17.))&240u|(uint(trunc(round(dW*15.)*17.))&240u)<<uint(8)|(uint(trunc(round(dT*15.)*17.))&240u)<<uint(16)|((uint(trunc(round(dC*15.)*17.))&240u)>>uint(4)|(uint(trunc(round(dh*15.)*17.))&240u)<<uint(4)|(uint(trunc(round(dP*15.)*17.))&240u)<<uint(12));p=uvec2(af<<uint(29)|aF<<uint(26)|uint(dq)<<uint(25)|aB<<uint(24)|(dD&255u)<<uint(16)|dD&65280u|dD>>uint(16),dp>>uint(8)&65280u|dp>>uint(24)&255u|dp<<uint(8)&16711680u|dp<<uint(24)&4278190080u);break;}while(false);i=uvec4(p.x&65535u,p.x>>uint(16),p.y&65535u,p.y>>uint(16));}