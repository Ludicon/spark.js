uniform mediump sampler2D z;layout(location=0)out uvec4 f;void main(){ivec2 t=ivec2(uvec2(gl_FragCoord.xy)*uvec2(4u));int d=t.x,u=t.y;vec3 x=texelFetch(z,t,0).xyz,b=x;int y=d+1;vec3 m=texelFetch(z,ivec2(y,u),0).xyz,v=m;int a=d+2;vec3 c=texelFetch(z,ivec2(a,u),0).xyz;int g=d+3;vec3 i=texelFetch(z,ivec2(g,u),0).xyz;int e=u+1;vec3 l=texelFetch(z,ivec2(d,e),0).xyz,n=texelFetch(z,ivec2(y,e),0).xyz,B=texelFetch(z,ivec2(a,e),0).xyz,C=texelFetch(z,ivec2(g,e),0).xyz;e=u+2;vec3 s=texelFetch(z,ivec2(d,e),0).xyz,D=texelFetch(z,ivec2(y,e),0).xyz,F=texelFetch(z,ivec2(a,e),0).xyz,H=texelFetch(z,ivec2(g,e),0).xyz;e=u+3;vec3 G=texelFetch(z,ivec2(d,e),0).xyz,E=texelFetch(z,ivec2(y,e),0).xyz,A=texelFetch(z,ivec2(a,e),0).xyz,k=texelFetch(z,ivec2(g,e),0).xyz,I=b+v+c+i+l+n+B+C+s+D+F+H+G+E+A+k;b=b*16.-I;float J=b.x,K=b.y,L=b.z;v=v*16.-I;float M=v.x,N=v.y,O=v.z;v=c*16.-I;float P=v.x,Q=v.y,R=v.z;v=i*16.-I;float S=v.x,T=v.y,U=v.z;v=l*16.-I;float V=v.x,W=v.y,X=v.z;v=n*16.-I;float Y=v.x,Z=v.y,_=v.z;v=B*16.-I;float h=v.x,j=v.y,o=v.z;v=C*16.-I;float p=v.x,q=v.y,r=v.z;v=s*16.-I;float w=v.x,at=v.y,am=v.z;v=D*16.-I;float av=v.x,ax=v.y,ab=v.z;v=F*16.-I;float ah=v.x,aj=v.y,ao=v.z;v=H*16.-I;float ap=v.x,aq=v.y,aJ=v.z;v=G*16.-I;float aK=v.x,aL=v.y,aM=v.z;v=E*16.-I;float az=v.x,aN=v.y,aO=v.z;v=A*16.-I;float au=v.x,ay=v.y,aP=v.z;v=k*16.-I;float ag=v.x,ak=J*J+M*M+P*P+S*S+V*V+Y*Y+h*h+p*p+w*w+av*av+ah*ah+ap*ap+aK*aK+az*az+au*au+ag*ag,ae=v.y,aa=v.z,aS=K*K+N*N+Q*Q+T*T+W*W+Z*Z+j*j+q*q+at*at+ax*ax+aj*aj+aq*aq+aL*aL+aN*aN+ay*ay+ae*ae,aV=L*L+O*O+R*R+U*U+X*X+_*_+o*o+r*r+am*am+ab*ab+ao*ao+aJ*aJ+aM*aM+aO*aO+aP*aP+aa*aa,aI=max(max(ak,aS),aV)>64.?.015625:1.,ad=ak*aI,aR=(J*K+M*N+P*Q+S*T+V*W+Y*Z+h*j+p*q+w*at+av*ax+ah*aj+ap*aq+aK*aL+az*aN+au*ay+ag*ae)*aI,ai=(J*L+M*O+P*R+S*U+V*X+Y*_+h*o+p*r+w*am+av*ab+ah*ao+ap*aJ+aK*aM+az*aO+au*aP+ag*aa)*aI;az=aS*aI;ay=(K*L+N*O+Q*R+T*U+W*X+Z*_+j*o+q*r+at*am+ax*ab+aj*ao+aq*aJ+aL*aM+aN*aO+ay*aP+ae*aa)*aI;au=aV*aI;vec3 aY=vec3(ad,az,au)+vec3(.0001220703125),al=aY*(1./max(max(aY.x,aY.y),aY.z));float aw=uintBitsToFloat(floatBitsToUint(al.x)^floatBitsToUint(aR)&2147483648u),aQ=uintBitsToFloat(floatBitsToUint(al.z)^floatBitsToUint(ay)&2147483648u),aT=al.y,an=aw*ad+aT*aR+aQ*ai,aA=aw*aR+aT*az+aQ*ay,aB=aw*ai+aT*ay+aQ*au,aC=max(max(abs(an),abs(aA)),abs(aB));vec3 aD=vec3(an,aA,aB)*(1./(aC==0.?1.:aC));float aW=aD.x,aZ=aD.y,aE=aD.z,aF=aW*ad+aZ*aR+aE*ai,aG=aW*aR+aZ*az+aE*ay,aH=aW*ai+aZ*ay+aE*au,aU=max(max(abs(aF),abs(aG)),abs(aH));bool aX=aU==0.;vec3 bo=vec3(aF,aG,aH)*(1./(aX?1.:aU));bvec3 a_=bvec3(aX);vec3 ac=vec3(a_.x?vec3(1).x:bo.x,a_.y?vec3(1).y:bo.y,a_.z?vec3(1).z:bo.z),as=I*.0625,ar=ac*vec3(.897000014781952,1.55400002002716,.549000024795532),af=ar*(1./dot(ar,ar))*vec3(.897000014781952,1.55400002002716,.549000024795532);float bz=dot(x,af),bu=dot(m,af);bool bv=bu<bz;uint bs=bv?0u:1u;float bk=bv?bu:bz;bool be=bu>bz;uint by=be?0u:1u;float bx=be?bu:bz,br=dot(c,af);bool bC=br<bk;uint bI=bC?0u:bu==bk?bs+1u:bs;float bb=bC?br:bk;bool bn=br>bx;uint bL=bn?0u:bu==bx?by+1u:by;float ba=bn?br:bx,bA=dot(i,af);bool bB=bA<bb;uint bR=bB?0u:br==bb?bI+1u:bI;float bf=bB?bA:bb;bool bD=bA>ba;uint bO=bD?0u:br==ba?bL+1u:bL;float bg=bD?bA:ba,bU=dot(l,af);bool bX=bU<bf;uint bd=bX?0u:bA==bf?bR+1u:bR;float bm=bX?bU:bf;bool bE=bU>bg;uint bJ=bE?0u:bA==bg?bO+1u:bO;float bi=bE?bU:bg,bF=dot(n,af);bool bG=bF<bm;uint bM=bG?0u:bU==bm?bd+1u:bd;float bH=bG?bF:bm;bool bK=bF>bi;uint bN=bK?0u:bU==bi?bJ+1u:bJ;float bc=bK?bF:bi,bP=dot(B,af);bool bQ=bP<bH;uint bj=bQ?0u:bF==bH?bM+1u:bM;float bS=bQ?bP:bH;bool bT=bP>bc;uint bq=bT?0u:bF==bc?bN+1u:bN;float bl=bT?bP:bc,bV=dot(C,af);bool bW=bV<bS;uint b_=bW?0u:bP==bS?bj+1u:bj;float bY=bW?bV:bS;bool bZ=bV>bl;uint bh=bZ?0u:bP==bl?bq+1u:bq;float bt=bZ?bV:bl,bp=dot(s,af);bool bw=bp<bY;uint cz=bw?0u:bV==bY?b_+1u:b_;float cl=bw?bp:bY;bool cv=bp>bt;uint ch=cv?0u:bV==bt?bh+1u:bh;float cy=cv?bp:bt,cu=dot(D,af);bool ce=cu<cl;uint cb=ce?0u:bp==cl?cz+1u:cz;float ck=ce?cu:cl;bool cC=cu>cy;uint cI=cC?0u:bp==cy?ch+1u:ch;float cx=cC?cu:cy,cA=dot(F,af);bool cn=cA<ck;uint cL=cn?0u:cu==ck?cb+1u:cb;float cf=cn?cA:ck;bool cB=cA>cx;uint cO=cB?0u:cu==cx?cI+1u:cI;float ca=cB?cA:cx,cF=dot(H,af);bool cD=cF<cf;uint cR=cD?0u:cA==cf?cL+1u:cL;float cm=cD?cF:cf;bool cU=cF>ca;uint cd=cU?0u:cA==ca?cO+1u:cO;float cg=cU?cF:ca,cP=dot(G,af);bool cX=cP<cm;uint cJ=cX?0u:cF==cm?cR+1u:cR;float cH=cX?cP:cm;bool cE=cP>cg;uint cM=cE?0u:cF==cg?cd+1u:cd;float ci=cE?cP:cg,cV=dot(E,af);bool cG=cV<cH;uint cN=cG?0u:cP==cH?cJ+1u:cJ;float cS=cG?cV:cH;bool cK=cV>ci;uint cj=cK?0u:cP==ci?cM+1u:cM;float cs=cK?cV:ci,cp=dot(A,af);bool cQ=cp<cS;uint co=cQ?0u:cV==cS?cN+1u:cN;float cY=cQ?cp:cS;bool cT=cp>cs;uint cq=cT?0u:cV==cs?cj+1u:cj;float cc=cT?cp:cs,du=dot(k,af);bool cW=du<cY;uint cr=cW?0u:cp==cY?co+1u:co;float cZ=cW?du:cY;bool cw=du>cc;uint c_=cw?0u:cp==cc?cq+1u:cq;float ct=cw?du:cc,dz=dot(as,af),df=cZ-dz,dv=ct-dz,de=(dv-df)*clamp(1.-clamp(float((du==cZ?cr+1u:cr)+(du==ct?c_+1u:c_)-2u)*.0714285746216774,0.,1.),0.,1.)*.03125;vec3 dA=clamp(ac*(df+de)+as,vec3(0),vec3(1)),dF=clamp(ac*(dv-de)+as,vec3(0),vec3(1));float dy=trunc(dA.x*255.+.5),dx=trunc(dF.x*255.+.5),dd=trunc(dA.y*255.+.5),di=trunc(dF.y*255.+.5),dp=trunc(dA.z*255.+.5);vec3 dI=vec3(dy,dd,dp);float dr=trunc(dF.z*255.+.5);vec3 dk=vec3(dx,di,dr),da,db;do{if(dx+di+dr<dy+dd+dp){db=dI;da=dk;break;}db=dk;da=dI;break;}while(false);vec3 dg=(db-da)*vec3(.897000014781952,1.55400002002716,.549000024795532)*.0039215688593686,dP=dg*(1./dot(dg,dg))*vec3(.897000014781952,1.55400002002716,.549000024795532);float ds=dot(da,dP)*.0039215688593686;uint dU=uint(7.*clamp(dot(s,dP)-ds,0.,1.)+.5)|uint(7.*clamp(dot(D,dP)-ds,0.,1.)+.5)<<uint(3)|uint(7.*clamp(dot(F,dP)-ds,0.,1.)+.5)<<uint(6)|uint(7.*clamp(dot(H,dP)-ds,0.,1.)+.5)<<uint(9)|uint(7.*clamp(dot(G,dP)-ds,0.,1.)+.5)<<uint(12)|uint(7.*clamp(dot(E,dP)-ds,0.,1.)+.5)<<uint(15)|uint(7.*clamp(dot(A,dP)-ds,0.,1.)+.5)<<uint(18)|uint(7.*clamp(dot(k,dP)-ds,0.,1.)+.5)<<uint(21),dV=uint(7.*clamp(dot(x,dP)-ds,0.,1.)+.5)|uint(7.*clamp(dot(m,dP)-ds,0.,1.)+.5)<<uint(3)|uint(7.*clamp(dot(c,dP)-ds,0.,1.)+.5)<<uint(6)|uint(7.*clamp(dot(i,dP)-ds,0.,1.)+.5)<<uint(9)|uint(7.*clamp(dot(l,dP)-ds,0.,1.)+.5)<<uint(12)|uint(7.*clamp(dot(n,dP)-ds,0.,1.)+.5)<<uint(15)|uint(7.*clamp(dot(B,dP)-ds,0.,1.)+.5)<<uint(18)|uint(7.*clamp(dot(C,dP)-ds,0.,1.)+.5)<<uint(21)|dU<<uint(24),dC=dU>>uint(8),dn=uint(db.x),dB=uint(db.z),dD=(dC&2863311530u)>>1u|(dC&1431655765u)<<1u,dE=(dD&3435973836u)>>2u|(dD&858993459u)<<2u,dG=(dE&4042322160u)>>4u|(dE&252645135u)<<4u,dH=(dG&4278255360u)>>8u|(dG&16711935u)<<8u,dJ=(dV&2863311530u)>>1u|(dV&1431655765u)<<1u,dK=(dJ&3435973836u)>>2u|(dJ&858993459u)<<2u,dL=(dK&4042322160u)>>4u|(dK&252645135u)<<4u,ec=(dL&4278255360u)>>8u|(dL&16711935u)<<8u;f=uvec4(65619u|uint(da.x)<<17u|dn<<25u,dn>>7u|uint(da.y)<<1u|uint(db.y)<<9u|uint(da.z)<<17u|dB<<25u,dB>>7u|(dH>>16u|dH<<16u),ec>>16u|ec<<16u);}
